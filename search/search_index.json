{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"The Human Connectome PHantom (HCPh) study: Standard Operating Procedures","text":"<p>These SOPs correspond to a pre-registered report</p> <p>These documents correspond to a pre-registration<sup>1</sup>. Please check the corresponding registered report (direct download) to get a better understanding of what these SOPs implement.</p> <p>The experiments and hypotheses were pre-registered to further guarantee research rigor and seek early scrutiny and feedback from experts in the field, thereby generating consensus on data collection and analysis. Researchers increasingly perceive pre-registration as a tool to maximize research transparency, improve study planning, and eliminate incentives conducive to dubious practices in the search for positive outcomes. By pre-registering the study, we will maximize the impact and usefulness of this work.</p> <p>Future reports and public communications of results of this project will be pre-registered whenever that is possible.</p> Figure 1. Experimental design of Cohort I. The first section of the study involves acquiring 72 sessions across three scanners of a single subject."},{"location":"#summary","title":"Summary","text":"<p>Unveiling how the brain's structure defines its distributed function and modulates the dynamics of processing holds the promise of triggering a revolution in neuroscience and applications to mental health and neurodegenerative diseases. Magnetic resonance imaging (MRI) has proven a valuable, non-invasive way of probing both the architecture and activity of the brain in-vivo, with sufficient spatial and temporal resolution to understand many aspects of its function. Although a large body of literature has shown strong correlations between structural and functional networks at the larger scales<sup>2,3,4,5</sup>, the accumulated unreliability of MRI measurements from the scanner and through further steps of the research workflow impedes the link between structure, function, and dynamics at clinically relevant spatial and temporal scales. In particular, the measurements obtained with MRI are highly indirect, spatiotemporally uncertain, and confounded by other sources of MR signal. This complexity provides an immense informatics challenge that crosses multiple imaging modalities, including structural, functional, and dynamic connectivity approaches to understanding the human brain. Nonetheless, functional and structural networks extracted from MRI have proven sufficient levels of reliability to discriminate between individuals<sup>5,6,7,8</sup>, and such reliability has proven stable from months to years<sup>9</sup>. Therefore, it is critical to characterize the reliability of this network\u2019s phenotyping before these analytical approaches may be applied clinically<sup>10,11</sup>. In this project, we will first optimize the research workflow of MR network analyses to maximize the reliability of functional and structural connectivity matrices (so-called connectomes). Indeed, these matrices have been shown to contain large ratios of false positives and false negatives in both the functional 12 and the structural<sup>13,14</sup> cases.  We hypothesize that such improvements in sensitivity and specificity of functional and structural networks generalize across scanners and subjects, allowing the univocal identification of individuals from their brain\u2019s networks (\"fingerprinting\"). In order to be able to statistically separate and characterize the sources of signal variation, the project involves acquiring large amounts of repeated data on a small number of individuals. This approach has recently been dubbed \"precision MRI\"<sup>15</sup> and focuses on individual differences rather than group differences. The data acquisition approach is structured in three efforts with varying numbers of subjects, repetitions, and scanning devices. The first two, called \"Cohort I\" and \"Cohort II\" are sequential in time, and collected on three different devices. Cohort I involves a single individual who will undergo a total of 60 scanning sessions. Subsequently, Cohort II involves six (6) individuals and a total of twelve (12) sessions each. Finally, \"Cohort III\" is a quality control set involving 18 individuals and a total of two sessions each in a single scanner. In total, the project plans for repeated MRI acquisition on 25 healthy, adult human subjects, across three different 3.0 Tesla (T) MRI scanners available at CHUV. In addition to the new data, the project will reuse existing, open-access data to pilot various aspects of the MRI processing and analysis workflow to further support the overall reliability of the findings.</p>"},{"location":"#impact","title":"Impact","text":"<p>Overall, this project will equip researchers with a framework for the extraction of reliable and precise structural, functional and dynamic networks that permit their joint modeling and analysis with interpretable and reproducible methods. The project will publicly release two highly valuable datasets necessary for the improvement of the workflow for structural and functional network extraction under open access and reuse terms. Upon conclusion, this study will mark a turning point for MRI research as a fundamental resource for academic training and a necessary assessment to unlock clinical applications in the long-term with the improvement of the reliability of MRI-network analyses. At a local scale, the project will substantially contribute to ensuring the reliability of the MRI clinical workflow that routinely aids medical decisions at CHUV.</p>"},{"location":"changes/","title":"Change History","text":"<p>All notable changes to these SOPs are documented below, starting with the most recent version of the document.</p> <p>You found an error</p> <p>If you want to check the list of open issues, please proceed to our issue tracker.</p> <p>If you have identified a problem, a typo, or something missing, and you know it is not in our tracker, please report it by creating a new issue.</p>"},{"location":"changes/#040-september-27-2023","title":"0.4.0 (September 27, 2023)","text":"<p>Compare with 0.3.0</p>"},{"location":"changes/#enhancements-new-features-and-additions","title":"Enhancements, new features, and additions","text":"<ul> <li>Add report pre-registered on OSF and fix references  (f9a8360 by Oscar Esteban).</li> <li>Replace <code>--merge true</code> with <code>--how merge</code> in datalad updates  (d297d45 by Oscar Esteban).</li> <li>Add DataLad documentation for synchronizing and adding new data  (5d57e74 by Oscar Esteban).</li> <li>Add a <code>.zenodo.json</code> with the intent of connecting Zenodo  (ee429ea by Oscar Esteban).</li> <li>Play nice with Apache license in heuristic, better documentation  (2dffffc by Oscar Esteban).</li> </ul>"},{"location":"changes/#bug-fixes","title":"Bug Fixes","text":"<ul> <li>Datalad DOI and link  (fc63118 by Oscar Esteban).</li> <li>Escape HTML special characters  (e54c468 by Oscar Esteban).</li> <li>Escaping characters  (737edce by Oscar Esteban).</li> <li>Remaining bugs in heuristic file  (443493c by Oscar Esteban). Related issues/PRs: #179</li> <li>Revise heuristic after testing it  (ca49867 by Oscar Esteban).</li> <li>Overhaul of the data-management section with DataLad  (5afcd97 by Oscar Esteban). Related issues/PRs: #100, #163, #160</li> </ul>"},{"location":"changes/#030-september-06-2023","title":"0.3.0 (September 06, 2023)","text":"<p>Compare with 0.2.0</p>"},{"location":"changes/#enhancements-new-features-and-additions_1","title":"Enhancements, new features, and additions","text":"<ul> <li>Replace unicode symbols with octicons/fontawesome icons  (675e1ff by Oscar Esteban).</li> <li>Add ET description to intro  (8bf5278 by Oscar Esteban). Related issues/PRs: #146, #153</li> <li>Deep revision of the PR  (1fefe2d by Oscar Esteban).</li> <li>Added a safety check for the desiccant chamber color  (7c13efc by Alexandre Cionca).</li> </ul>"},{"location":"changes/#bug-fixes_1","title":"Bug Fixes","text":"<ul> <li>Scanner name leak  (71a5e81 by Alexandre Cionca).</li> <li>Indentation for rendering / show admonition folded  (0747ffe by Oscar Esteban).</li> <li>Typos (ae572d9 by C\u00e9line Provins).</li> <li>Add missing picture in emergency procedures section  (e977607 by Oscar Esteban). Related issues/PRs: #89</li> </ul>"},{"location":"changes/#020-august-29-2023","title":"0.2.0 (August 29, 2023)","text":"<p>Compare with 0.1.0</p>"},{"location":"changes/#enhancements-new-features-and-additions_2","title":"Enhancements, new features, and additions","text":"<ul> <li>Change icon of quote admonitions  (fbadaed by Oscar Esteban).</li> <li>Large overhaul, including initial flowchart of the experiment  (0e0d390 by Oscar Esteban).</li> <li>Add explanation in SOPs and code to run defacing  (2d8982c by C\u00e9line Provins ).</li> <li>Add codespell  (61717da by Oscar Esteban).</li> <li>Add folder structure of the BIDS dataset  (c3d0a2a by Oscar Esteban). Related issues/PRs: #94</li> <li>Add tape for head motion  (2dbae4d by Oscar Esteban). Related issues/PRs: #87</li> <li>Add STP100D and MMBT-S manuals  (9feb336 by Oscar Esteban).</li> <li>Improve some admonitions  (de3f034 by Oscar Esteban).</li> </ul>"},{"location":"changes/#bug-fixes_2","title":"Bug Fixes","text":"<ul> <li>Stop leaking host name  (5a42d85 by Oscar Esteban). Related issues/PRs: #122</li> <li>Refactor of the preliminary section, separating an intro from it  (19b4571 by Oscar Esteban).</li> <li>Trim trailing spaces, change admonition type  (6e16e80 by Oscar Esteban).</li> <li>Revert removal of indentation in script file  (9be8d05 by Oscar Esteban).</li> <li>Reorder some incongruent steps, move sound, light and ventilation  (e1f4b4b by Oscar Esteban).</li> <li>Use octicons and fontawesome  (09927cc by Oscar Esteban).</li> <li>Inconsistencies in the ET's eye-coverage setting and calibration  (15cebe2 by Oscar Esteban).</li> <li>Misplaced ET description and minor revisions  (60475e7 by Oscar Esteban). Related issues/PRs: #99</li> <li>Spell check and indentation with spaces  (2c2cdeb by Oscar Esteban).</li> <li>Add a note regarding disruption on BIDS names after session 14  (1da4810 by Oscar Esteban).</li> <li>Wrong number of sessions at index page  (1adb77d by Oscar Esteban).</li> <li>Typo  (abe827c by Oscar Esteban).</li> <li>Improve the key listening  (ead2438 by Oscar Esteban).</li> </ul>"},{"location":"changes/#maintenance-and-continuous-integration","title":"Maintenance and Continuous Integration","text":"<ul> <li>Update git-changelog config  (29d79f0 by Oscar Esteban).</li> <li>Fix file path and run black for style  (164d8f1 by Oscar Esteban).</li> </ul>"},{"location":"changes/#010-june-29-2023","title":"0.1.0 (June 29, 2023)","text":"<p>The first release of these SOPs. Currently, the document is still a work in progress, with the Data management, Preprocessing, and Release of data yet to be written.</p> <p>Compare with first commit</p>"},{"location":"changes/#enhancements-new-features-and-additions_3","title":"Enhancements, new features, and additions","text":"<ul> <li>Rename study-settings file  (f53526e by Oscar Esteban).</li> <li>Add task timings and references  (b21c717 by Oscar Esteban). Related issues/PRs: #73 Co-authored-by: Elodie Savary</li> <li>Add phys2bids commandline  (0d22fd7 by Oscar Esteban).</li> <li>Change theme, add chuv logo, update data-storage  (a00e833 by Oscar Esteban).</li> <li>Refining the participant preparation  (f450fd2 by Oscar Esteban).</li> <li>Sectioning the participant preparation  (84a4ee1 by Oscar Esteban).</li> <li>Revise @celprov's code  (a011894 by Oscar Esteban).</li> <li>Minimal, stylistic changes  (030a9ca by Oscar Esteban).</li> <li>Remove comment about starting recordings as it is now covered by #71  (e4fa2cf by Oscar Esteban).</li> <li>Overhaul of the scanning section of the SOPs  (732c963 by Oscar Esteban).</li> <li>Add emergency procedures  (fc52766 by C\u00e9line Provins ).</li> <li>Miscalleneous improvements and picture addition  (b9b74c0 by C\u00e9line Provins ).</li> <li>Add info on how to configure the Acknowledge software and record physiolocal signals  (f321875 by C\u00e9line Provins ).</li> <li>Add information about the outputs of the different sequences to better explain the procedure  (c7db90a by H\u00e9l\u00e8ne Lajous).</li> <li>Add info about cleaning procedure  (f15155a by H\u00e9l\u00e8ne Lajous).</li> <li>Correct typos and add info in case you know which exam will be run next  (3d82aee by H\u00e9l\u00e8ne Lajous).</li> <li>Add details about how to switch to advanced user mode to save a protocol  (8e5c46a by H\u00e9l\u00e8ne Lajous).</li> <li>Add details and correct a few typos  (fdd742d by H\u00e9l\u00e8ne Lajous).</li> <li>Review comments  (1745329 by Oscar Esteban).</li> <li>Add picture of the ET attached  (eaa3a8a by Oscar Esteban).</li> <li>Setup mkpdfs plugin  (2d6f9fd by Oscar Esteban).</li> <li>Make it louder  (6d6cce4 by Oscar Esteban).</li> <li>Add info box about moving the mirror slightly to the right  (589fd63 by Oscar Esteban).</li> <li>Add warning about attachment of infrared mirror  (00c214d by Oscar Esteban).</li> <li>Miscalleneous improvements and image additions  (a74aa6d by C\u00e9line Provins ).</li> <li>Give instructions on how to switch on the scanner  (c83ad23 by H\u00e9l\u00e8ne Lajous).</li> <li>Improve how the scanner is switched off  (f95d559 by H\u00e9l\u00e8ne Lajous).</li> <li>Say you want to turn the key  (85180b4 by H\u00e9l\u00e8ne Lajous).</li> <li>[heudiconv heuristic] Do not deduplicate if run is found  (5f15cca by Oscar Esteban).</li> <li>Add phone call script  (8b10d1c by C\u00e9line Provins ).</li> <li>Add what to do if the alarm rings  (f89e399 by C\u00e9line Provins ).</li> <li>Replace BIOPAC setup photo with Ines' annotated one  (8e97af7 by C\u00e9line Provins ).</li> <li>Add missing bibliography  (a667955 by C\u00e9line Provins ).</li> <li>Addition of miscalleneous information and of many missing pictures  (20ad2bd by C\u00e9line Provins ).</li> <li>Add link to reproin  (dd4978f by Oscar Esteban).</li> <li>Add a filter to show missing secrets as REDACTED or replace values  (61451c8 by Oscar Esteban).</li> <li>Improvements to the data management section  (2a176c1 by Oscar Esteban).</li> <li>Minimal improvements to clean-up  (d20edf3 by Oscar Esteban).</li> <li>Add pictures and improve new exam description  (c02291f by Oscar Esteban).</li> <li>Split data collection  (516c388 by Oscar Esteban).</li> <li>Add GA video  (944a525 by Oscar Esteban).</li> <li>Reorder misplaced steps, improve rendering  (3ede838 by Oscar Esteban).</li> <li>Ensuring it looks good when rendered  (07b0f04 by Oscar Esteban).</li> <li>Added some files, restructure and fix some items  (3fa2c85 by Oscar Esteban).</li> <li>Fix typos and overhaul of data collection  (00e3daf by Oscar Esteban).</li> <li>Add images of gas analyzer  (6032ed0 by C\u00e9line Provins ).</li> <li>Add info how to setup the respiration belt and the gas analyzer  (62bf6fd by C\u00e9line Provins ).</li> <li>Add info to setup BIOPAC  (3719eca by C\u00e9line Provins ).</li> <li>Add info to turn off computer  (3e66ec8 by C\u00e9line Provins ).</li> <li>Add info about plugging the coil after the exam has been open  (1d5b501 by C\u00e9line Provins ).</li> <li>Add info about how to save the magnitude image of the fmap  (d3efc7d by C\u00e9line Provins ).</li> <li>Add ack, edit/reorder some sections  (46e41fa by Oscar Esteban).</li> <li>First pass at data collection checklist  (2ab93f7 by Oscar Esteban).</li> <li>Update README  (3833e37 by Oscar Esteban).</li> </ul>"},{"location":"changes/#bug-fixes_3","title":"Bug Fixes","text":"<ul> <li>Add missing settings file  (0d4d3f8 by Oscar Esteban).</li> <li>[heudiconv heuristic] Identify phase and mag in func and fmap-epi  (e1e3170 by Oscar Esteban).</li> <li>[heudiconv heuristic] Robuster detection of phase/mag in GRE fieldmaps  (e65f0d2 by Oscar Esteban).</li> <li>Wrong path of mathjax  (731dfdd by Oscar Esteban).</li> <li>Reorder scanning protocol to match sequences order in the manuscript  (80ee8f4 by C\u00e9line Provins ).</li> <li>Correct console parameter name for reconstruction  (dd1f3cf by C\u00e9line Provins ).</li> <li>Fix layout  (3facec9 by C\u00e9line Provins ).</li> <li>Wrong link to psychopy git repo  (33ed5e5 by C\u00e9line Provins ).</li> <li>Missing picture  (7eb7f42 by C\u00e9line Provins ).</li> <li>Update RR figure 1  (387722b by Oscar Esteban).</li> <li>Add missing dependency  (976ae4c by Oscar Esteban).</li> <li>Correct errors I introduced in @helenelajous' PR  (3b656f2 by Oscar Esteban).</li> <li>[heudiconv heuristic] More sensible decision for phasediff fieldmaps  (3d9b73e by Oscar Esteban).</li> <li>[heudiconv heuristic] Set run when duplicates of a sequence are found  (504e217 by Oscar Esteban).</li> <li>[heudiconv heuristic] Overhaul of the reproin heuristic  (6576b32 by Oscar Esteban).</li> <li>Minimal amends  (9e9d56f by Oscar Esteban).</li> <li>PACSMAN instructions  (b562372 by Oscar Esteban).</li> <li>PACSMAN csv file example  (e0a8f66 by Oscar Esteban).</li> <li>Images with wrong paths, and names  (5260d62 by Oscar Esteban).</li> <li>Miscellaneous stuff  (df5a300 by Oscar Esteban).</li> <li>Update version of gha/checkout and fix path second time  (cfcc19c by Oscar Esteban).</li> <li>Still setting up path  (dfe542c by Oscar Esteban).</li> <li>Roll-back the path option  (ac2661f by Oscar Esteban).</li> <li>Checkout action  (1a149b2 by Oscar Esteban).</li> <li>Remove toc plugin  (3861174 by Oscar Esteban).</li> </ul>"},{"location":"changes/#maintenance-and-continuous-integration_1","title":"Maintenance and Continuous Integration","text":"<ul> <li>Set <code>--in-place</code> editing of the changelog  (48f8acd by Oscar Esteban).</li> <li>Refine changelog update with git-changelog  (e4ea298 by Oscar Esteban).</li> <li>Use git-changelog to update the changelog  (856e58a by Oscar Esteban).</li> <li>Remove old exemplary code  (2e5697c by Oscar Esteban).</li> </ul>"},{"location":"release/","title":"Defacing","text":"<p>The first step before releasing the data is to deface the T1w and T2w images for all sessions. To perform defacing, we are using a software called PyDeface (Gulban et al. 2019). To proceed, run the following command in the command line: <pre><code>    bash ./code/defacing/run_pydeface.sh\n</code></pre></p>"},{"location":"release/#references","title":"References","text":"<p>[1]: Gulban, Omer Faruk, Dylan Nielson, Russ Poldrack, John Lee, Chris Gorgolewski, Vanessa Sochat, and Satrajit Ghosh. 2019. \u201cPoldracklab/Pydeface: V2.0.0.\u201d Zenodo. doi: 10.5281/zenodo.3524401.</p>"},{"location":"assets/code/signals/","title":"hcphsignals","text":"<p>Table of Contents</p> <ul> <li>Installation</li> <li>License</li> </ul>"},{"location":"assets/code/signals/#installation","title":"Installation","text":"<pre><code>pip install hcphsignals\n</code></pre>"},{"location":"assets/code/signals/#license","title":"License","text":"<p><code>hcphsignals</code> is distributed under the terms of the MIT license.</p>"},{"location":"data-collection/emergency-procedures/","title":"Emergency procedures","text":"<p>Reminder: Phone number of internal emergency services can be found in the agenda of all the phones of the hospital.</p>"},{"location":"data-collection/emergency-procedures/#fire-in-the-scanning-room","title":"Fire in the scanning room","text":"<ul> <li> Immediately call the internal firefighter service at  ##-###.</li> <li> <p> Enter in the MRI room and cut the electricity in the MRI room by pressing the red button next to the entrance.</p> <p>Cutting electricity will NOT turn off the magnetic field!</p> </li> <li> <p> Remove the subject from the scanner's room, applying the manual extraction procedure described below.</p> </li> <li> Close the scanner's room.</li> <li> <p> Retrieve the MR-compatible extinguisher from its designated corner of the control room (see picture below) and put it in front of the scanning room.</p> <p>Conventional extinguishers MUST NOT be entered in the scanning room because the magnetic field is still active</p> <p></p> </li> </ul>"},{"location":"data-collection/emergency-procedures/#emergency-quench","title":"Emergency quench","text":"<p>The quench button is to be used only in the case of an emergency in which a person is injured and the only safe way to avoid further injury is to decrease the magnetic field strength of the magnet.</p> <ul> <li> Lift the security cover to free the red, mushroom-shaped button with the STOP word written on it, and push it.     </li> </ul> <p>Fire in the scanner's room does not justify quenching unless the high field poses a direct threat to a person's health</p>"},{"location":"data-collection/emergency-procedures/#participant-set-the-alarm","title":"Participant set the alarm","text":"<p>If at any point the participant rings the alarm, you MUST check on the participant IMMEDIATELY with the scanner's speaker system.</p> <ul> <li> <p> Press the speaker button (1 in the picture below) and ask if everything is alright. It is possible that the participant triggered the alarm by mistake.     </p> <p>Pressing the speaker button (1) or the crossed-bell button (4) will turn the alarm off and open the speaker line to talk to the participant.</p> </li> </ul> <ul> <li> Assess the participant and the situation by asking them what is wrong and checking the camera inside the room and the scanner's console.</li> </ul> <p>If you can anticipate that the participant will need to be retrieved</p> <p>Initiate the extraction of the bed from the scanner console using the Room in menu (lower left corner of the screen), and then click on the home () button.</p>"},{"location":"data-collection/emergency-procedures/#alarm-event-requires-further-safety-procedures","title":"Alarm event requires further safety procedures","text":"<ul> <li> <p> Enter the scanning room if you do not get a response or the answer is unclear.</p> <p>If there is an impending risk to the participant's health and it is safe for you and other operators to intervene, take actions to avert the dangerous situation.</p> <p>For example, if the participant is choking because of the accidental occlusion of their respiratory ways after the displacement of some experimental instrument or sensor, immediately extract them from the scanner's bore with the fastest procedure available to you and remove the occluding instruments.</p> <p>Similarly, suppose the participant suffers an acute panic attack and starts violently and uncontrollably shaking on the table. In that case, you will first lift the security side rails of the bed and securely restrain the participant further within the scanning table if necessary. This is critical to preempt their body from falling off the table while the head coil is still attached. Only when you can safely do so, extract them from the bore and remove the head coil.</p> </li> </ul>"},{"location":"data-collection/emergency-procedures/#participant-possibly-needs-to-be-retrieved-but-there-isnt-impending-risk-to-their-health","title":"Participant possibly needs to be retrieved but there isn't impending risk to their health","text":"<ul> <li> <p> If the alarm is still blaring, press the large, circular button at either side of the scanner's bore.     </p> </li> <li> <p> Make the participant aware that you entered the room and ask them what is wrong.</p> <p>If the participant is unresponsive, extract them from the scanner's bore using the standard procedure (the Home button). In case you previously cut the electricity or failure of the standard procedure, follow the manual procedure described in the first steps of manual extraction protocol.</p> </li> <li> <p> Determine whether the participant can continue the session after some comforting or information or if it must be stopped at that point (e.g., the participant is feeling claustrophobic and cannot continue).</p> </li> <li> If the session must be stopped, or you determine it is necessary to extract the participant before making that decision, hit the \"Home\" button to bring the participant outside the scanner's bore quickly.         </li> </ul>"},{"location":"data-collection/emergency-procedures/#in-case-you-feel-unsafe","title":"In case you feel unsafe","text":"<p>If you feel unsafe for any reason (for example, because a patient behaves aggressively or threatens you), CALL SECURITY at  ##-###.</p>"},{"location":"data-collection/emergency-procedures/#technical-difficulties","title":"Technical difficulties","text":"<p>If you are facing technical difficulties:</p> <ul> <li> Seek help from anyone on the BH7 floor.</li> <li> If you still have problems or didn't find anyone (e.g., scanning on a weekend), call the ER's MRI staff at  ##-###.</li> </ul>"},{"location":"data-collection/emergency-procedures/#a-person-requires-medical-attention","title":"A person requires medical attention","text":"<p>At any moment, you may determine that the participant will require medical attention:</p> <ul> <li>The participant's health has been threatened or is actively at risk (e.g., elevated heart frequency, lack of pulse, respiratory issues, unconsciousness, dizzyness, unsteadyness, etc.)</li> <li>The participant is unresponsive</li> <li>The participant reports feeling unwell and needs attention</li> <li>You think they may need medical attention but you are unsure.</li> </ul> <p>If you determine that someone needs medical attention, call the resuscitation unit  ##-###</p> <p>The resuscitation unit  ##-### is the number to call in any case, even if the participant is not in life-threatening condition.</p> <p>The phone number of the emergency services can be found on all the phones at CHUV.</p> <p>After you called the resuscitation unit:</p> <ul> <li> <p> Press on the heart button  \u2014(1) in the picture below\u2014 on the wall, after lifting the security lid.</p> The heart button  (1) initiates a beacon to guide the intensive care team to the place where they need to intervene; (2) cancels the beacon. <p>In case you pressed the heart button by mistake, turn it off by pressing the adjacent green button (2).</p> </li> <li> <p> If the participant remains in the scanning room, re-enter the room and proceed with the manual extraction protocol.</p> </li> </ul> <p>Danger</p> <p>If the resuscitation team needs to shock the participant for cardiac resuscitation, it must never be done on the MR table.</p>"},{"location":"data-collection/emergency-procedures/#manual-extraction-procedure","title":"Manual extraction procedure","text":"<ul> <li> If the bed is inside the bore:<ul> <li> Unlock the manual retrieval of the scanner's bed</li> <li> Pull the bed all the way out of the bore</li> <li> Lock the manual retrieval back</li> </ul> </li> <li> Lift the table's breaks locking the wheels</li> <li> Lift the manual lock of the table's attachment to the bore.</li> <li> Pull the bed out of the scanning room</li> <li> Reassess the participant's health in the control room and determine a course of action.</li> </ul> <p>Resetting the scanner's table after it's been manually detached</p> <ul> <li> Dock the table onto the scanner's bore by insert the arrow-shaped prong into the docking bay.</li> <li> Wait for the MRI screen to indicate it is ready for docking, push down the right attachment pedal with your foot for locking.</li> <li> Simultaneously press the up and down buttons to activate the automatic recalibration of the table.</li> </ul>"},{"location":"data-collection/emergency-procedures/#immediately-report-incidents","title":"Immediately report incidents","text":"<p>MRI coordinators must be informed</p> <p>Once the situation is resolved, and before anything else, send an email to \u2588\u2588\u2588 and \u2588\u2588\u2588. Make sure to report any potential risk you can anticipate to clinical activity the following day.</p>"},{"location":"data-collection/intro/","title":"Overall experimental settings","text":"<p>The goal of the experimental setting is to obtain several functional MRI tasks and a long diffusion MRI scan with synchronized physiological recordings, including gas contents with a gas analyzer (GA), eye tracking (ET; including the right eye position, pupil size, blinks, etc.), respiration tracking through a pneumatic respiration belt (RB), and finally MRI-compatible electrocardiogram (ECG).</p> <p>The overall experimental setting can be summarized as follows:</p> <pre><code>flowchart TB\n\n    subgraph \"Scanning Room\"\n        direction TB\n        sr1[Scanner]\n        sr2[Cannula]\n        sr3[RB]\n        sr4[ECG]\n        sr5[ET]\n    end\n\n    subgraph \"BIOPAC\"\n        direction TB\n        biopac1[DA100C]\n        biopac2[ECG100C MRI]\n        biopac3[AMI100D]\n        biopac4[STP100D]\n    end\n\n    sr1 ---&gt;|Trigger| sb[Syncbox]\n    sr2 ---&gt; ga[Gas Analyzer]\n    sr3 ---&gt;|\"Negative (-)\"| biopac1[DA100C]\n    sr4 ---&gt; biopac2[ECG100C MRI]\n    sr5 ---&gt; et[Eye Tracker PC]\n\n    ga ---&gt;|\"Channel 3 (CO&lt;sub&gt;2&lt;/sub&gt;)\"| biopac3\n    ga ---&gt;|\"Channel 4 (O&lt;sub&gt;2&lt;/sub&gt;)\"| biopac3\n\n    sb ---&gt;|USB| pc1[\"Stimuli presentation Laptop (\u2588\u2588\u2588)\"]\n    pc1 &lt;---&gt;|Ethernet| et\n    pc1 ---&gt;|USB| modem[MMBT-S Interface]\n    pc1 ---&gt;|HDMI| display[Projector]\n    modem ---&gt;|25-pin parallel| biopac4\n\n    BIOPAC ---&gt;|Ethernet| pc2[\"Physio-recording Laptop (\u2588\u2588\u2588)\"]</code></pre> <p>The above graph can be broken down as follows:</p> <ol> <li>Signals generating from the Scanning Room.     In addition to the MR imagery produced by the scanner, the participant will be wearing the RB, the ECG leads, a nasal cannula to retrieve the expired gases, and finally their right eye will be recorded with the infrared camera of the ET.     All those probes and devices carry signals outside the Scanning Room either through cables or tubes, with the access panel as the interface.     The access panel also has a connector carrying the trigger signals generated by MR schemes, which indicate important events in the MRI acquisition (typically, one trigger pulse is generated for each new repetition time \u2014TR\u2014, e.g., with every fMRI volume).</li> <li> <p>Syncbox.     A NordicLabs Syncbox receives TTL (transistor-transistor logic) triggers from the scanner.     This box can just forward the triggers converted into other formats and/or manipulate them (e.g., filter, generate, etc.).</p> The NordicLabs Syncbox </li> <li> <p>Gas analyzer (GA).     The GA is a device that continuously measures the amount of two gases (CO<sub>2</sub> and O<sub>2</sub>) from a sample fed at the front of the device with a connected tube (this tube comes from inside of the Scanning Room and ends in the nasal cannula the participant is wearing, as shown in the graph).</p> </li> <li> <p>BIOPAC.     The BIOPAC is the main recording hub.     It directly receives analogical signals from the Scanning Room (for the case of the RB and the ECG).     Indirectly, it receives the analogical signal from the GA, and digital signals from the Psychopy laptop (\u2588\u2588\u2588).</p> </li> <li> <p>Eye tracker (ET).     The ET is composed of two main elements:     (i) inside the scanner's bore, we place an arm that holds an infrared lens and camera sensor on one side and an infrared lamp that illuminates the right eye of the subject through a special mirror to reflect the infrared spectrum; and (ii) a PC tower that receives the camera recordings, postprocess the images and calculates the final parameters of interest (position of the eye, pupil size, etc.).     The ET is also connected to the Psychopy laptop (\u2588\u2588\u2588), and communicates bi-directionally with it (e.g., to record logs or receive \"messages\" such as triggers or task events).     The ET is NOT connected to the BIOPAC, with the implication that the ET data is not stored with the other physiological information.</p> </li> <li>Stimuli presentation laptop.     The Psychopy laptop (\u2588\u2588\u2588) has the Psychopy software install and with it, the task programs are executed.     This experiment consists of three tasks: breath-holding task (BHT), resting-state fMRI (rest), and a quality-control task (QCT).     This laptop also stores the data recorded by the ET at the end of the experiment.</li> <li>Physiology recording laptop.     The AcqKnowledge laptop (\u2588\u2588\u2588) runs the BIOPAC's AcqKnowledge software and with it, this computer records the signals and allows visualization of the data coming from the BIOPAC.     All the inputs to the BIOPAC are multiplexed through into an Ethernet cable that is connected to this laptop.</li> </ol>"},{"location":"data-collection/intro/#getting-familiar-with-the-instruments","title":"Getting familiar with the instruments","text":"<p>Emergency procedures</p> <p>It is critical you fully understand and study the emergency procedures to run an MRI scan at CHUV.</p>"},{"location":"data-collection/intro/#biopac-documentation-and-devices","title":"BIOPAC documentation and devices","text":"<p>Get familiar with the BIOPAC setup and read through the hardware documentation. The system is composed by the main unit (MP160; extreme left in the picture below), to which modules are attached depending on what signals are to be recorded.</p> <p></p> <p>Additional modules in our settings are (from left to right in the above picture):</p> <ul> <li>The SPT100D (solid state relay driver unit) is used to input digital signals that must be recorded.</li> <li>The AMI100C unit can receive up to 16 analog signals.</li> <li>The DA100C unit records the signal coming from the respiration belt.     This unit requires the pressure transducer TSD160A unit to be connected.</li> <li>The ECG100C MRI unit records the electrical signal coming from the heart via the ECG.     This unit requires the MECMRI-2 unit on the ECG100C unit.</li> </ul> <p>In addition to the main unit, we have a data modem to feed digital signals into the SPT100D. This modem is the MMBT-S Trigger Interface Box adapter (N-shaped, pink box):</p> <p></p>"},{"location":"data-collection/intro/#ad-instruments-ml206-gas-analyzer-documentation-and-basics","title":"AD Instruments ML206 Gas analyzer: documentation and basics","text":"<p>The front of the gas analyzer (GA) looks like this:</p> <p></p> <p>It is critical to familiarize with the GA's manual to learn about its correct utilization.</p> <p>Make sure you understand the switching on and off procedures described in these SOPs</p> <p>The input to the GA must be connected through a DM-060-24 desiccant chamber and a MLA0110 flow valve and a MLA0343 drying tube:</p> <p></p> <p>The MLA0343 drying tube and the DM-060-24 desiccant chamber MUST be replaced when their inside color turns into pink.</p> <p>Finally, make sure to watch the following video:</p>    Your browser does not support the video. Click here to download it"},{"location":"data-collection/intro/#eyelink-1000-plus-eye-tracker-documentation-and-basics","title":"EyeLink 1000 Plus eye tracker: documentation and basics","text":"<p>Get familiar with the setup and read through the Eye Tracker Instruction Manual.</p> Thanks to Benedetta Franceschiello! <p>All the documentation about the ET is derived from Benedetta Franceschiello's user guide.   We greatly appreciate her help with the device.</p> The ET is composed of three major elements: the ET arm (left), which holds the lens and camera and an infrared lamp, the Host Computer (middle), and the infrared mirror (right) <ul> <li>The ET arm is an articulated support for the infrared camera and lens in one end and with an infrared lamp at the other end.     The ET arm is installed inside the Scanning Room, inside the scanner's bore, standing on a transparent plexiglass panel tailored to the scanner's bed rail.     Two lengthy cables (black for power and orange for signal) are passed through the access panel and connect the ET arm to the ET computer.</li> <li>The ET computer is a standard PC with customized software for the control of the ET.</li> <li>The infrared mirror is critical to be able to record the right eye of the participant, and is mounted covering the standard mirror of the coil.</li> </ul>"},{"location":"data-collection/intro/#scanning-protocols","title":"Scanning protocols","text":"<p>The study will collect data with two different scanning protocols. Most of what is described in the present SOPs addresses the Reliability Imaging Protocol that will be acquired on the \u2588\u2588\u2588 scanner.</p> Reliability Imaging Protocol (36 sessions \\(\\times\\) one scanner) mm:ss Standard Imaging Protocol (12 sessions \\(\\times\\) three scanners) mm:ss Head scout 00:14 Head scout 00:14 FoV Manual positioning 01:00 FoV Manual positioning 01:00 T1w (anatomical reference) 5:41 T1w (anatomical reference) 5:41 DWI (dMRI, structural connectivity) 33:52 EPI BOLD (\\(B_\\text{0}\\) field mapping) 00:30 DWI (\\(B_\\text{0}\\) field mapping) 00:54 BOLD (single-echo RSfMRI, eyes open) 20:09 GRE (\\(B_\\text{0}\\) field mapping) 02:38 GRE (\\(B_\\text{0}\\) field mapping) 03:08 EPI BOLD (\\(B_\\text{0}\\) field mapping) 00:27 BOLD (multi-echo RSfMRI, eyes open, only \u2588\u2588\u2588) 10:09 BOLD (positive-control task fMRI) 03:07 DWI (dMRI, structural connectivity) 27:31 BOLD (multi-echo RSfMRI, naturalistic movie) 20:09 DWI (\\(B_\\text{0}\\) field mapping) 01:10 BOLD (breath-holding task fMRI) 06:00 T2w (anatomical reference) 08:24 T2w (anatomical reference) 05:10 Total Acquisition Time 79:12 Total Acquisition Time 77:56 <p>Stimulation program timings</p> <p> The stimuli presentation laptop (\u2588\u2588\u2588) will execute four experiments, which will allow the synchronization of all devices by sending the adequate signals at their predesignated times and also present visual stimuli with the scanner's projector. The lengths of the four Psychopy experiments should be:</p> <ul> <li><code>dwi.psyexp</code> \u279c ##min ##s,</li> <li><code>task-qct_bold.psyexp</code> \u279c 2min 38s,</li> <li><code>task-rest_bold.psyexp</code> \u279c 20min 6s, and</li> <li><code>task-bht_bold.psyexp</code> \u279c 5min 41s.</li> </ul>"},{"location":"data-collection/participant-prep/","title":"Preparing the participant","text":"<p>Procedures for when the participant has arrived</p> <p>It is critical to stay alert and anticipate any potential risk to the participant to avert them. This is particularly important for the first session.</p>"},{"location":"data-collection/participant-prep/#preparation-of-the-participant-in-the-control-room","title":"Preparation of the participant in the CONTROL ROOM","text":""},{"location":"data-collection/participant-prep/#participant-reception","title":"Participant reception","text":"<ul> <li> Meet the participant at an easily locatable place (e.g., the reception desk of the Radiology Unit) and show them the way into the control room. Allow sufficient time before the experiment for the preparation (min. 30 minutes).</li> <li> Show the participant the scanning room and explain to them how the device is controlled from outside.</li> <li> <p> Ask the participant to fill out the consent form and MRI safety screener, and verbally confirm responses, paying attention to frequently forgotten devices and implants, like orthodontia.</p> <p>DO NOT subject the participant to any risk</p> <ul> <li> In case of any doubts emerging from the MRI safety screening, contact \u2588\u2588\u2588 immediately at  ###-###-####. DO NOT PROCEED if the medical contact cannot be reached.</li> <li> In case of discovering any previously undisclosed contraindication, the volunteer MUST NOT participate in the study.</li> </ul> </li> <li> <p> Remind the participant to use the bathroom at this moment if they need (\u2588\u2588\u2588).</p> <p>Only female participants, only the first session</p> <ul> <li> <p> Remind the participant that for their safety, pregnant women cannot participate:</p> <p>Hey [NAME], I have to remind you that pregnant women cannot participate for their safety. To be absolutely sure that you are not scanned while being pregnant, the ethical review board requests us that you take a pregnancy test before the first session. Here you have a test, and this is the urine sample cup. I'm going to show you the bathroom now so that you can do the test with the necessary privacy.</p> </li> <li> <p> Provide the participant with a pregnancy test and a urine sample cup.</p> </li> <li> Go over the instructions with them.</li> <li> Accompany them to the bathroom (situated at \u2588\u2588\u2588), and ask whether there is anything else they anticipate they will need.</li> <li> If the test is positive, the person CANNOT PARTICIPATE in the study. You MUST be understanding of the situation as most likely the person will not be aware of the circumstance.</li> </ul> </li> <li> <p> Instruct the participant on how to use the alarm button:</p> Alarm button should be used when needed <p>During the duration of the exam, you'll have an alarm button on your hand. You can use it at any moment. We will first talk with you to check everything is fine, and we will stop the session whenever you need to stop the experiment. There is no need for you to endure uncomfortable experiences or anxiety (for instance, if you feel claustrophobic)</p> </li> </ul>"},{"location":"data-collection/participant-prep/#describing-the-development-of-the-session","title":"Describing the development of the session","text":"<ul> <li> <p> Describe the participant how the session will develop, with special attention to tasks. In the first session, show the task while explaining them for clarity. Let them interrupt you to ask for clarifications and answer all the questions that may arise.</p> Script for the first session <p>We are going to acquire three types of images. The first type is anatomical imaging that we use to study the morphology of the brain. The second type is diffusion MRI, which we use to infer the pathways of major fiber bundles showing how the different regions of the brain may be interconnected. Finally, we collect functional MRI, which we use to understand how the brain activates as a response to stimuli we will present to you. During the whole duration of the exam, please do not create closed loops by crossing your legs or holding your hands together. It is possible that your peripheral nerves get stimulated at some points, so you will feel twitching of muscles, for instance, of your pectorals. Do not panic, it is okay, but if it feels too uncomfortable, please squeeze the alarm button.</p> <p>For the anatomical and the diffusion MRI we just ask you to relax and try to stay as still and comfortable as possible. Like a photographic camera, the largest problem making analyses difficult is motion. As opposed to a photo camera, the imaging of the brain happens very slow so there is a lot of opportunity for involuntary movements (e.g., when you blink or you take a deeper breath) or semi-voluntary (e.g., you need to swallow).</p> <p>The functional MRI is a bit more entertaining, as we will ask you to engage in different behavioral activities. The first functional block is what we call a positive-control task, that will tell us little about your brain but will help us determine if there are confounding signals intermixed with your data. In this positive-control task, you will be shown a fixation point with the shape of a circle. Whenever you see that fixation point, please focus your gaze at the center of it. At points the fixation point will browse around the screen. When that happens, please follow it with your eyes taking care of not moving your head with the eye movement. Other times it will be fixed on the center, and have a blank gray background or a flickering or grating circular area behind it. The last element of this block will show the words LEFT or RIGHT. When either appears, please tap your thumb on each of the your other four fingers of the hand designated by the word, sequentially with all fingers and reversing the direction at the extremes (your pointer and your pinkie). This positive-control task has a length of 2min 38s. During this task, please leave the alarm button on your tummy, where you can recover it when it finishes.</p> <p>Then there is a long block of 20min 6s that we call resting state. During this block, all you have to do is stay still and look at the movie. Please do not close your eyes.</p> <p>Finally, a breath-holding task will help us understand the signals elicited by your breathing that are detected by the scanner. This block has a length of 5min 41s. You will watch five repeats of the same block. Each block will show you a colored rectangle in the middle. The green rectangle means breathe in, the yellow rectangle means breathe out, and the red rectangle means hold your breath. The last two green and yellow rectangle will be shown on a lighter green and orange color respectively to signal you that a hold will follow immediately after the breathe-out. The red rectangle will turn pink to indicate that you will soon be able to breathe-out any remaining air in your lungs and breathe in again. Please remember to breathe out after the breath-hold. When no rectangle is presented, you can breathe as it feels more comfortable to you. The first of the blocks is a mock. That will be reminded to you at the beginning of the task on the screen. During the mock block, please look at the stimuli on the screen but keep your habitual breathing pace disregarding the task instructions. At the end of this mock block, a message will remind you to follow the task instructions from that moment on. You must adapt your breathing to the pace indicated by the color-changing rectangle in the center of the screen for the remaining four repetitions of the block.</p> <p>Is everything clear to you? Do you have any questions?</p> Script for the following sessions <p>As you probably remember, we acquire three types of images. For two of them you just stay still in the scanner, but we will also require your collaboration for the third, which is functional MRI. During the whole duration of the exam, please do not create closed loops by crossing your legs or holding your hands together. It is possible that your peripheral nerves get stimulated at some points, so you will feel twitching of muscles, for instance, of your pectorals. Do not panic, it is okay, but if it feels too uncomfortable, please squeeze the alarm button.</p> <p>Let's quickly recap the functional MRI tasks. The first is the positive-control task, you will be shown a fixation point with the shape of a circle that you must follow with your gaze wherever it goes and then the words LEFT or RIGHT while which you tap your fingers like this (remind to them). During this task, please leave the alarm button on your tummy, where you can recover it when it finishes.</p> <p>Then there is a long block of about 20 minutes that we call resting state, where you will be watching a movie. During this block, all you have to do is stay still and please do not close your eyes.</p> <p>Finally, the breath-holding task where you will watch five repeats of the same block with colored rectangles in the middle. The green rectangle means breathe in, the yellow rectangle means breathe out, and the red rectangle means hold your breath. The last two green and yellow rectangle will be shown on a lighter green and orange color respectively to signal you that a hold will follow immediately after the breathe-out. The red rectangle will turn pink to indicate that you will soon be able to breathe-out any remaining air in your lungs and breathe in again. Please remember to breathe out after the breath-hold. When no rectangle is presented, you can breathe as it feels more comfortable to you. The first of the blocks is a mock. That will be reminded to you at the beginning of the task on the screen. During the mock block, please look at the stimuli on the screen but keep your habitual breathing pace disregarding the task instructions. At the end of this mock block, a message will remind you to follow the task instructions from that moment on. You must adapt your breathing to the pace indicated by the color-changing rectangle in the center of the screen for the remaining four repetitions of the block.</p> <p>Is everything clear to you? Do you have any questions?</p> </li> </ul>"},{"location":"data-collection/participant-prep/#finalizing-the-preparation","title":"Finalizing the preparation","text":"<ul> <li> <p> Offer the participant a box to deposit everything they have in their pockets and all jewelry/hair accessories, and indicate the clothing to enter the scanning room:</p> Dress code inside the scanner if they need to CHANGE INTO SCRUBS <p>Before we continue, we need to make sure we do not introduce any dangerous object in the magnet room.</p> <p>Here you will find a changing room [SHOW THEM THE CHANGING ROOM]. I have prepared some scrubs for you. Please remove all your clothes and leave them in the changing room. Please keep your underwear on [if a woman, ask whether their undergarment DOES NOT contain any large metallic part such as shaping guides, and request their removal if they do].</p> Dress code inside the scanner if they CAN WEAR THEIR CLOTHES <p>Before we continue, we need to make sure we do not introduce any dangerous object in the magnet room.</p> <p>Please deposit here all your belongings, your belt, your glasses, your jewelry and any accessories, piercings, etc. that you have on you. If a woman, ask whether their undergarment DOES NOT contain any large metallic part such as shaping guides, and request their removal in the changing room.</p> </li> <li> <p> Help the participant to prepare their skin and place the ECG electrodes:</p> <p>Ask the participant if they have atopic skin or other skin problems</p> <p>If the participant reports having skin issues, be careful with the following process and do not unnecessarily irritate their skin (e.g., skip the alcohol cleaning and perhaps the abrasion with the preparation gel)</p> <ul> <li> Open the sterile cotton gauze pads package, take one and moisten it with alcohol.</li> <li> Clean the skin around the three areas with the alcohol-soaked pad with circular movements.</li> <li> Get a second cotton gauze pad and put some Nuprep preparation gel and gently abrade the skin by rubbing it onto the skin with four or five circular movements.</li> <li> Remove gel excess with a clean cotton gauze.</li> <li> Remove the protective film from the electrode.</li> <li> Stick the electrode on the participant's skin by starting in one side and ironing the rest of the electrode. This procedure ensures that no air is trapped between the electrode and your skin and that no wrinkles from at the edges. Repeat for the three electrodes.     </li> </ul> </li> </ul>"},{"location":"data-collection/participant-prep/#preparation-of-the-scanning-protocol-control-console","title":"Preparation of the scanning protocol (control console)","text":"<ul> <li> Close open patients discarding changes.     </li> <li> Search for the participant by clicking on the \"Patient Browser\" in the top left corner.       If the participant is not shown (because it is archived and hence not locally found):<ul> <li> Click on the DICOM Q/R button on the top-right area.       </li> <li> Introduce some unambiguous search criteria:       </li> <li> Select the subject (left column) or the sequence (right column) you want to retrieve and hit Retrieve. Be careful, you probably want to retrieve a subject, that means make sure you have selected a row on the left column:       </li> <li> Go back to the \"Patient Browser\" and check that the patient now shows up in the local search.</li> </ul> </li> <li> Check the head coil is not plugged before initiating a \"New examination\" to ensure good SNR of the localizer sequence.</li> <li> Right click and select \"New examination\".     </li> <li> <p> In the Program Selection tab:     </p> <ul> <li> Enter the weight and height of the participant.</li> <li> Select the right protocol under RESEARCH \u2937 Oscar.</li> <li> Select Brain as the organ.</li> <li> Select the Position as \"Head First Supine\".</li> <li> Before you hit Exam, you can edit general patient's data by changing to the Patient Registration tab if you need to edit general information about the patient.</li> <li> Click the Exam button (red background, rightmost-bottom).</li> </ul> </li> <li> <p> Load the adequate protocol, making sure of loading the right phase-encoding (PE) direction corresponding to the session.</p> <ul> <li> Double-check that all PE prescriptions are correct.</li> </ul> </li> </ul>"},{"location":"data-collection/participant-prep/#installing-the-participant-in-the-scanning-room","title":"Installing the participant in the SCANNING ROOM","text":"Thanks to Stephanie Bogaert, MSc, Pieter Vandemaele, MSc and Pim Pullens, PhD <p>Some of the pictures in this section have been extracted from the Ghent Institute for functional and Metabolic Imaging MRI User 2019 written by Stephanie Bogaert, MSc, Pieter Vandemaele, MSc and Pim Pullens, PhD. We express our gratitude that they put together such a comprehensive guide.</p> <ul> <li> Have the participant remove their shoes at the entrance of the scanning room.</li> <li> Show the alarm button to the participant and explain how they may use it.</li> <li> Give to the participant the emergency button. Make the participant try it, so they can see it works. To switch off the alarm, there's a button on the scanner (circular, both on the left and on the right of the hole)</li> <li> Give them the ear-plugs to protect their hearing during acquisition, allow time for them to place them.</li> <li> Instruct the participant to lay on the MRI bed.</li> </ul>"},{"location":"data-collection/participant-prep/#connecting-physiological-recording-sensors-and-probes","title":"Connecting physiological recording sensors and probes","text":"<ul> <li> Connect the ECG leads to the three electrodes. The electrodes MUST be connected following the color scheme shown in the picture above.</li> <li> Install the RB below the participant's chest and connect it to the tube as shown in the picture below. The RB measures the stretching induced by breathing, so it MUST surround the chest or stomach comfortably. Positioning the RB higher (chest) or lower (stomach) depends on the individual's preferential respiration mode (chest breathing or diaphragmatic, respectively).</li> <li> <p> Place the nasal cannula in the nose of the participant making sure the two protrusions are aligned with the nostrils of the participant. Place the tube behind the ears and tighten under the chin for comfort and stability by sliding the ring as shown in the picture above.</p> <p></p> </li> <li> <p> When completely laying down on the bed, tightly fasten the RB and check with the participant whether they are too uncomfortable.</p> </li> <li> <p> Check the AcqKnowledge signal visualization of the adjustment of the RB, and make sure that the signal is not saturating (when the RB is too tight) or too weak (when the RB is too loose).</p> <p>Two-people protocol to check the RB settings.</p> <p>This check requires two experimenters, one INSIDE (IN) the scanning room and one more outside (OUT)</p> <ul> <li> OUT indicates they are ready to start the check by signaling a THUMBS-UP WITH BOTH HANDS through the Scanning Room window  .</li> <li> IN MUST confirm they understand returning the THUMBS-UP WITH ONE HAND .</li> <li> IN finalizes the setting of the RB if necessary and asks the participant to breathe normally.</li> <li> Once the participant is lying down on the bed and breathing normally, and the check can be carried out, IN MUST signal they are ready by sending a THUMBS-UP WITH BOTH HANDS   through the window.</li> <li> OUT MUST acknowledge the understanding, return a THUMBS-UP WITH BOTH HANDS  , and check the AcqKnowledge screen.</li> <li> OUT checks for signs of saturation and insufficient dynamic range.     These issues manifest as plateaus and excessively flat lines (respectively) in the AcqKnowledge visualization of the RB signal.</li> <li> OUT provides feedback to the inside room as follows:<ul> <li>If the RB must be tightened up, pointer finger going up ;</li> <li>if the RB must be loosened up, pointer finger going down ;</li> <li>if OUT needs to check again, they show two hands  , checks the AcqKnowledge again and signs another instruction; and</li> <li>if the check is finished, OUT signs a THUMBS-UP WITH BOTH HANDS  .</li> <li>IN MUST acknowledge all the commands with THUMBS-UP WITH ONE HAND  if understood. If not understood, they can request with a PRAYING gesture .</li> </ul> </li> </ul> </li> <li> <p> Solicit feedback on participant's comfort while positioning them on the scanner bed and suggest ergonomic positioning of their arms to avoid discomfort.</p> </li> </ul>"},{"location":"data-collection/participant-prep/#accommodating-the-participants-head-in-the-coil","title":"Accommodating the participant's head in the coil","text":"<ul> <li> Adjust the participant inside. With the paddings, their head position MUST be adjusted and elevated so that the nose and the forehead of the participant are both close to the upper coil. This procedure ensures the ET has the clearest possible view of eye.</li> <li> This part must be repeated taking out and putting back the upper part of the head-coil, adjusting the pillow at every step, until the head is fixed and the nose and forehead of the participant almost touch the coil. In case of need, ask the participant to rotate their head like when saying yes until reaching an adequate position, place any remaining paddings.      </li> <li> <p> Take the side paddings and fit them between each ear and the coil. If using the inflatable padding, pump air into them without making the participant uncomfortable (check with them).</p> <p></p> </li> <li> <p> Cut a long strip of medical auto-adhesive band and stick it at each side of the lower block of the head coil, across the participant's forehead and stick it to the participant's forehead. Indicate the participant that this band will tell them when they moved and help them recover the original position.</p> </li> <li> Place the top block of the coil and check that the participants' front touches or is really close to the coil. Now the nose can also be a bit far from the coil. Tell the participant to relax the neck, so the nose should go a bit up and touch the coil.</li> <li> Connect the coil's cable to the corresponding socket on the table.</li> <li> Check that both the posterior and anterior parts of the head-and-neck coil are now detected by the scanner.     To do so, ensure their names (\"Head Neck 64 Posterior\", and \"Head Neck 64 Anterior\", respectively) appear on the scanner's monitor screen.</li> <li> Place rectangular paddings at each side of the chest and help the participant accommodate their elbows on them.</li> <li> <p> Cover them with a blanket if necessary, and remind them of not closing loops with their body:</p> <p>Ask the participant if they are feeling cold</p> <p>Hey [NAME], are you feeling cold? Do you want a blanket?</p> <p>I have placed some paddings for your elbows, is there anything else you would need to feel comfortable?</p> <p>Throughout the examination, remember not to create closed loops by crossing your legs or holding hands together.</p> </li> <li> <p> Gently move the participant with the manual regulation. Stop when the head is under the head-localizer. Ask the participant to close their eyes, press the laser alignment button and align the head-coil markers with the red light.</p> </li> <li> <p> Switch off the alignment light, now the participant can open their eyes. You can move the participant (always gently as before) inside the scanner manually, until the mm counter marks \"Isometric\" or you can press the rotary knob for two seconds. This will send the participant to the isocenter automatically.</p> <p></p> </li> <li> <p> Once the participant is lying on the scanner bed, check that no arms/legs rest on the GA or the RB tubes and may block them.</p> </li> <li> Before continuing with the setup, make sure all cables and tubes leave the scanner's bed perpendicularly and lie on the floor.     Tape them to the floor so that they don't move accidentally.</li> </ul>"},{"location":"data-collection/participant-prep/#final-preparatory-steps-of-the-et","title":"Final preparatory steps of the ET","text":"<p>Please note that some of the images used in this section are sourced from the Eye Tracker Instruction Manual.</p> <p>To ensure accurate performance and prevent minor drifts in the pupil and corneal reflection (CR) thresholds, perform the ET Setup 10-15 minutes after powering the ET on.</p> <ul> <li> Open the QCT experiment in Psychopy (<code>task-qct_bold.psyexp</code> file).<ul> <li> Run the experiment by pressing the green play button.</li> <li> Press enter to begin the camera setup mode.</li> <li> The camera setup mode contains a view of one eye, and you can switch that view between two modes: one is the field-of-view of the ET, the second is an automatic zoom on the eye itself (or a random part if the eye is not visible).</li> <li> To ease the setup of the ET, switch to the field-of-view mode in the camera setup mode by pressing the  or  arrow.     This will allow you to adjust the ET position as the infrared camera provides feedback inside the scanning room on the projection screen.</li> </ul> </li> <li> <p> Enter the scanning room and adjust the ET arm position and focus of the lens until the eye is fully visible.     The right eye should be visible at the center of the coil's square window for the eye.</p> <p>Adjusting the camera's field-of-view and focus</p> <ul> <li> <p> To adjust the camera position, slightly unscrew the fixation locks of the camera arm, move the arm in search of the correct position, and tighten the locks again on the desired position.     </p> </li> <li> <p> If the eye coverage is still inappropriate, realign the mirror frame position by sliding it along the rails attached to the coil.     You may ask the participant to do it while inside the bore.</p> </li> <li> If the eye coverage is still inappropriate, re-adjust the participant's head positioning inside the coil.     You'll need to extract the bed outside of the bore for this by pressing the Home () button.</li> <li> If the eye coverage is still inappropriate, revise the vertical position of the infrared mirror with respect to the standard mirror (this will require new gloves and replacing the tape to stick the infrared mirror).     Even a tiny adjustment can impact calibration and eye positioning.</li> <li> Repeat the previous steps until the eye is properly aimed and focused.</li> <li> If the image appears blurry, fine-tune the focus using the lens barrel.     Refer to the example image below.     </li> </ul> </li> <li> <p> Press the A key to set the pupil and CR detection thresholds automatically.</p> </li> <li> <p> Fine-tune the pupil detection threshold using the  and  arrow keys if necessary.     While checking the pupil/CR image and thresholding, ask the participant to look at the screen corners to verify correct detection even in extreme positions.     </p> </li> <li> <p> As a last resort, you can also adjust the strength of the infrared light (emitter).     This is the black box on the opposite side of the lens on the ET arm.     Under the emitter there are two little screws.     Unscrew, move the emitter front/back, check the contrast of the face image, re-screw.</p> </li> <li> Switch the ET to Eye camera mode (zoomed in) and check the eye is still well covered by the view and the pupil is segmented.</li> <li> Check that two crosses appear on the eye.</li> <li> If the pupil is correctly seen, as well as the eye (indicated by the crosses following their movement), inform the participant that you are leaving the room, and that you are going to first check with them whether the speaker works well, immediately.</li> <li> Exit the camera mode by pressing Enter.</li> </ul>"},{"location":"data-collection/participant-prep/#check-the-communication-with-the-participant","title":"Check the communication with the participant","text":"<p>Emergency buttons</p> <p>The STOP button (3) immediately stops the currently running sequence. The crossed-out bell  button (4) stops the alarm if the participant actioned it.</p> <ul> <li> <p> Make sure the speaker is audible (and not annoying) and confirm the participant's feedback.     First, keep the speak mode button (1) pressed while you talk to the participant:</p> <p>Hey [NAME], can you hear me well? Is the audio too loud or too low?</p> </li> <li> <p> Enable the feedback channel from the Scanning Room by pressing the listen mode button (2) once.     Release the speak mode button (1) before you are ready to listen to participant responses.</p> </li> <li> Set the volume control of your microphone and the participant's speaker by pressing the corresponding  buttons.</li> <li> If this volume increase is not enough for the participant to hear you well, proceed as follow:<ul> <li> In the Siemens program, click on Configuration represented by a gear wheel () at the top right of the screen.</li> <li> Click on Configuration panel</li> <li> Under the section Scan application, locate the icon of the speaker and tune the volume to the maximum.</li> <li> Click Apply</li> </ul> </li> </ul>"},{"location":"data-collection/pre-session/","title":"Before each session","text":"<p>Instructions of operations to be performed before the participant arrival, before EACH session (i.e., DAY OF SCAN)</p>"},{"location":"data-collection/pre-session/#three-days-before-the-first-session","title":"Three days BEFORE THE FIRST SESSION","text":"<ul> <li> Verify that as part of the recruitement and screening procedure, you have sent a copy of the MRI Safety and screening form (EN|FR) to the participant over email and confirm reception by checking the 'First contact email sent' column in our recruits spreadsheet.</li> <li> Verify also that you confirmed that the participant has read and understood the document, and in particular, you double-checked that they do not have any MRI contraindications, by checking the 'Phone interview done' and 'Participant volunteer and eligible' column in our recruits spreadsheet.</li> <li> If the phone call interview was more than three days before the first session, call the participant again to reconfirm the following information:<ul> <li> Remind the participant that any jewelry should be removed prior to the scan.</li> <li> Indicate that they MUST shave the upper area of their chest where the ECG electrodes will be placed, if there is hair. The ECG electrodes MUST directly contact the skin.</li> <li> Confirm clothing:<ul> <li> if allowed to wear street clothes, remind the participant to avoid clothing with metal or that would uncomfortable to lie in for the duration of the scan; otherwise</li> <li> remark the participant they will be given a gown and they will need to change before every session.</li> </ul> </li> <li> Repeat at what time and where will you meet the participant.</li> <li> Verify that the participant has your phone number  ###-###-#### to call you in case he gets lost.</li> <li> FEMALE PARTICIPANTS ONLY: Remind the participant that pregnant women cannot undergo our MRI protocols. Therefore, they will take a pregnancy test (which we will have prepared) before the first session.</li> </ul> </li> <li> If participant has indicated nervousness or history of claustrophobia, organize a session to use the mock scanner.</li> </ul>"},{"location":"data-collection/pre-session/#before-day-of-scan","title":"BEFORE DAY OF SCAN","text":"<ul> <li> Print the informed consent form (first session only), an MRI safety screener (EN|FR) and a receipt form for each participant that will get scanned.</li> <li> Make sure you have internet access, and update the HCPh-fMRI-tasks repository on \u2588\u2588\u2588:     <pre><code>git fetch upstream\ngit checkout main\ngit rebase upstream/main\n</code></pre></li> <li> On the \u2588\u2588\u2588 laptop, open a terminal and execute <code>conda deactivate</code>.</li> <li> Open psychopy 3 by typing <code>psychopy</code></li> <li> Load in the different experiments and check for proper functioning:<ul> <li> <code>task-rest_bold.psyexp</code> (resting-state fMRI):<ul> <li> check that the movie is played.</li> </ul> </li> <li> <code>task-bht_bold.psyexp</code> (breath-holding task, BHT):<ul> <li> check that the task runs properly.</li> </ul> </li> <li> <code>task-qct_bold.psyexp</code> (quality-control task, QCT):<ul> <li> check that the task runs properly.</li> </ul> </li> </ul> </li> </ul>"},{"location":"data-collection/pre-session/#documentation-and-other-non-experimental-devices","title":"Documentation and other non-experimental devices","text":"<ul> <li> Prepare the informed consent form (first session only)</li> <li> Prepare an MRI safety screener (EN|FR)</li> <li> Prepare a pen and a receipt form that the participant will sign when they are given the compensation</li> <li> Check you have the AcqKnowledge software USB license key</li> <li> Prepare a pregnancy test (Only female participants on their first session)</li> <li> Prepare a thermometer</li> <li> Prepare a blood pressure meter</li> <li> Prepare scrubs and MR-compatible glasses if applicable</li> <li> <p> Prepare a pack of sterile cotton gauze, a bottle of medical alcohol, the Nuprep skin preparation gel (white/blue tubes), and three new electrodes.</p> <p></p> </li> <li> <p> Verify that your phone is on ringing mode so the participants can reach you</p> </li> <li> Check the time regularly to be on time to meet with the participant at the predefined location</li> </ul>"},{"location":"data-collection/pre-session/#boot-the-scanner-up-if-it-is-shut-down","title":"Boot the scanner up if it is shut down","text":"<p>Please wait for all systems to finalize their boot-up (about 10 minutes), even if only the satellite station is to be used.</p> <p></p> <ul> <li> Turn the key of the System ON/OFF Station Box into the open lock position ()</li> <li> Push the blue button with the sun symbol  and the SYSTEM ON label above, which is found right above the key</li> </ul>"},{"location":"data-collection/pre-session/#basic-preparations-in-the-scanning-room","title":"Basic preparations in the scanning room","text":"<ul> <li> If any head coil from the last exam is still plugged, remove it:<ul> <li> If it is the 64-channel coil, you can just temporarily move it into the scanner's bore.</li> <li> Otherwise, store it on the shelf where the other coils are and bring the 64-channel one in the proximity of the bed (e.g., inside the scanner's bore). Make sure to remove other coil's fitting element.</li> </ul> </li> <li> Remove the spine coil by lifting the corresponding latch, then sliding it toward the head of the bed, lift it from the bed, and place it on the floor ensuring it is not obstructing any passage or unstable.</li> <li> Place the two back padding elements filling the spine coil socket.</li> <li> Cover the MRI bed with a sheet.</li> <li> Place the 64-channel head-and-neck coil into its socket at the head end of the bed.</li> <li> <p> Completely remove the light inside of the scanner and the ventilation of the scanning room using the scanner's interface.</p> <p>Remove the light and ventilation to facilitate the best performance of the ET</p> </li> </ul>"},{"location":"data-collection/pre-session/#setting-up-the-biopac-system-and-physiological-recording-sensors","title":"Setting up the BIOPAC system and physiological recording sensors","text":"<ul> <li> Ensure you have the AcqKnowledge software USB license key. Plug the USB key to the multiport adapter for Mac and plug that adapter to the computer \u2588\u2588\u2588 as shown in the picture below. It needs to stay plugged at all times during the acquisition.</li> <li> Open the AcqKnowledge software</li> <li> Initiate an Amphetamin session to avoid the computer to go to sleep/lock the screen:<ul> <li> Click on the pill icon on the Mac's status bar</li> <li> Select New session \u2937 While is running \u2937 Acqknowledge.</li> </ul> </li> <li> Plug the power cord of the BIOPAC and of the GA into suitable power sockets.</li> <li> Plug in the Ethernet (the plug is on the back side of the BIOPAC) to the multiport adapter connected to the computer \u2588\u2588\u2588.      </li> <li> <p> Connect the parallel cable to the 25-pin socket at the back of the SPT100D of the BIOPAC and to the parallel port of the MMBT-S Trigger Interface Box adapter (N-shaped pink box).     </p> <p></p> </li> <li> <p> Plug the power cords of the BIOPAC and the GA into suitable power sockets.</p> </li> <li> Go inside the scanning room, unscrew the wood cap that covers the hole in front of the MR.</li> <li> Check that the extension tube for the nasal cannula does not contain any bubbles.</li> <li> Delicately pass the extension tube that will be connected to the nasal cannula and the extension tube from the respiration-belt (RB) through the front access tube. </li> <li> <p> Connect the distal end of the extension tube to the cannula and leave the cannula on the bed ready for the participant.     To connect the extension tube to the cannula, you need to insert with force the end into the cannula.</p> <p>Ensure that the length of the tubing inside the MR room is sufficient so that it can lie on the floor.</p> <p>When the tubing is hanging, pressure waves may alter the recorded gas concentration.</p> </li> <li> <p> Connect the distal end of the RB tube to the RB and leave it on the bed. </p> </li> <li> <p> Go back to the control room and connect the proximal end of the cannula extension tube to one plug of the desiccant chamber (which one is not important). Connect the MLA0110 inline filter to the other plug of the desiccant chamber. Connect the MLA0343 drying tube to the MLA0110 inline filter.</p> <p>Make sure that the inside color of the drying tube and the desiccant chamber have not turned pink. They must be replaced if it is the case.</p> </li> </ul> <p></p> <ul> <li> Remove the cap of the gas input (Sample In, front panel of the GA) and connect the MLA0110 inline filter to it. The inline filter MUST be replaced after some ten sessions. </li> <li> Connect the coaxial end of the BNC-BNC cable to the CO<sub>2</sub> output in the back of the GA and connect the other end (jack plug) into the input end of the INISO/A filter. </li> <li> Connect one end (RJ-11 to RJ-11) to the output of the INISO/A filter, and the other into channel 3 of the AMI100D BIOPAC module. </li> <li> Check that the RB (DA100C) and ECG (ECG100C MRI) channels are set to channel 1 and channel 2. </li> </ul> <p>Important</p> <ul> <li> Check that the exhaust pipe (back of the GA) is free of obstruction. An obstructed exhaust can damage the device!</li> </ul> <p></p> <ul> <li> Check that the cap on <code>Sample In</code> is removed and that the MLA0110 inline filter is connected to it. The pump switch MUST BE OFF when the cap is on and when switching on the GA. Turn the GA on using the on/off switch located at the front of the GA. The GA MUST be ON for 20-30 min to warm-up before measuring. </li> <li> Check that the flow control wheel (front of the GA) is set to the maximum.</li> <li> Connect the proximal end of the RB tube to the TSD160A BIOPAC unit, using the plug marked negative (- symbol).</li> <li> Connect the cable from the RJ-45 output of the syncbox to the first filter (BNC connector; has a label \"External signal\") in the cupboard covering the access panel to the Faraday cage. The cable might be stored in the lower left cupboard of office \u2588\u2588\u2588. Make sure you will have access to the cable with sufficient time ahead. [INSERT PICTURE]</li> <li> Connect the syncbox to the Biopac via the white trigger cable. [TOCHECK]</li> </ul>"},{"location":"data-collection/pre-session/#setting-up-the-projector","title":"Setting up the projector","text":"<ul> <li> Go to room \u2588\u2588\u2588, where the projector is installed.</li> <li> Switch the projector ON by hitting the power button, located on its right side.</li> <li> <p> Verify the aim of the projector's beam by looking through the tube into the Scanning Room.</p> The projector's position SHALL NOT be modified unless it is evidently off <p>Only in the case that the projector beam is not correctly targeting the projection screen inside the Scanning Room, which is possible if someone accidentally altered the configuration, you may adjust its position as follows:</p> <ul> <li> Adjust the projector tilt to center the projection if it does not properly aim the panel inside the scanner's bore.     E.g., change the height of the paper pile that supports it (see images, FENS papers).</li> </ul> The tube is the part through which you should check the quality of the projection </li> <li> <p> Verify the projection corresponds to the Psychopy laptop (\u2588\u2588\u2588) screen.</p> </li> <li> Before you exit room \u2588\u2588\u2588, go to the next step.</li> </ul>"},{"location":"data-collection/pre-session/#setting-up-the-eye-tracker-et-computer","title":"Setting up the eye-tracker (ET) computer","text":"<ul> <li> The eye-tracker (ET) computer is kept on its designated rolling table, which is stored under the projector in room \u2588\u2588\u2588.     Behind the rolling table, there is a transparent panel (the plexiglas in the following) where the ET arm will stand inside the scanner bore.</li> <li> Verify that the screen, the cables, as well as the ET computer are fixated onto the rolling table with scotch tape.</li> <li> Bring the rolling table out of the projector room (\u2588\u2588\u2588) into the control room.     Be very attentive during the displacement and lift the front wheels when passing steps or cables.     The plexiglas panel can also be brought to the scanning room at this time, if done with care.</li> <li> Place the rolling table next to the access closet.</li> <li> Connect the Ethernet cable from the ET computer into the Ethernet plug of the Psychopy laptop (\u2588\u2588\u2588).</li> <li> Connect the power strip attached to the rolling table on to the closest power plug (likely, a power strip coming across the corridor).</li> </ul>"},{"location":"data-collection/pre-session/#setting-up-the-et-arm","title":"Setting up the ET arm","text":"<ul> <li> Go to room \u2588\u2588\u2588 and bring the blue box labeled Eye-Tracker only for fMRI into the scanning room.     This box contains the ET arm with the camera and infrared lamp mounted on it, lenses, and the special infrared mirror.     The box should be found in the first cabinet on the left section of the cupboard.</li> <li> <p> Take the MR-compatible lens out of the lenses box.</p> The appropriate lens is found in a correspondingly labeled bag (left) and it is the only one with two gold screws (right). </li> <li> <p> Install the MR-compatible lens, after removing any other present lens.     If other lens is present, put it back into its plastic bag inside the lenses box after unscrewing and removal.</p> <p>The lens MUST be handled with care</p> <ol> <li>The lens MUST be installed in the Control Room, BEFORE taking the ET arm inside the Scanner Room.</li> <li> <p>One of your hands MUST be under the lens at all times while screwing/unscrewing it, to avoid accidentally dropping a lens.</p> <p></p> </li> <li> <p>Screws holding the lens MUST be properly tightened at this point because the vibration of the scanner may loosen them and the screw(s) may drop during the session.</p> </li> </ol> </li> <li> <p> Open the door of the access cupboard.</p> </li> <li> <p> With the help of someone else, pass the optic fiber (orange wire) and the power cable (the one with a fabric sheet) through the access point.</p> <p>This operation requires two people</p> <p>One person will feed the cables from the control room interface of the access cupboard. The other person will gently pull the two cables from inside. Both people will lift the cable to avoid its abrasion with the edges of the metallic cylinder, which is the passage between exterior and interior of the scanner room. Once the sliding of the cable is finished, leave the extremities inside the scanner room in the left-top corner, far from the scanner because they are magnetic.</p> <p></p> <p>Since someone will enter the Scanning Room to receive the cables, this is a perfect moment for the helper from inside to take the plexiglass panel with them when entering the Scanning Room.</p> </li> </ul>"},{"location":"data-collection/pre-session/#inside-the-scanner-room","title":"INSIDE the scanner room","text":"<ul> <li> Take the ET arm inside the Scanning Room (check that the plexiglass panel is already inside the Scanning Room, and bring it inside with you if not).</li> <li> Place the plexiglass standing panel inside the scanner bore: a sign notes the top side that faces up.     The plastic feet must face down to avoid the panel to slide.     To ensure the repeatible positioning of the ET, place the end of the plexiglass such that its edge aligns with the edge of the illuminated MRI rails.</li> <li> <p> Place the ET arm on top of the plexiglass panel with the two posterior feet of the ET arm aligned within the two corner signs made of scotch tape.</p> <p>Hold the ET arm FIRMLY, because the magnetic field imposes some resistance.</p> </li> <li> <p> Connect the cables (two plugs for the black, one plug for the orange).     </p> </li> <li> Take the half-circle one-direction screen from the table behind the scanner and put it on the back of the scanner, behind the ET system (don't push the plexiglass yet)     </li> </ul>"},{"location":"data-collection/pre-session/#placing-the-infrared-mirror","title":"Placing the infrared mirror","text":"<ul> <li> Detach the standard mirror's frame from the head coil, if it is placed there.     Remove unnecessary items from the scanning bed, and prepare the mirror to attach the infrared mirror of the ET at a later step.</li> <li> Prepare two long strips of scotch tape and leave them in a convenient place to attach the ET mirror later.     E.g., attach the corner of each strip to the back part of the mirror frame.</li> <li> <p> Go back to the control room and take the infrared mirror out of the \u00abfMRI usage\u00bb box. DO NOT EXTRACT THE MIRROR OUT FROM ITS BOX YET. The mirror's box is labeled as RELIQUIA DI SAN GENNARO to emphasize that THIS IS THE MOST DELICATE PART, BECAUSE THE MIRROR CANNOT BE REPLACED NOR CLEANED. This mirror is EXTREMELY EXPENSIVE.</p> <p></p> </li> <li> <p> Get two gloves (e.g., from the box hanging at the entrance of the scanner room), then approach the scanner bed. Put the gloves on, and DON'T TOUCH ANYTHING. You MUST have the standard mirror dismounted and in front of you at this point. WITH THE GLOVES proceed to extract the infra-red mirror from its box, being extremely careful. YOU CAN ONLY TOUCH THE MIRROR WITH GLOVES, because it cannot be cleaned up. Watch out for FINGERPRINTS and once taken out of its box, IMMEDIATELY PROCEED TO ATTACH IT to the standard coil mirror. The mirror MUST NOT be placed anywhere else if not in its box.</p> </li> <li> <p> WITH YOUR GLOVES ON, attach the ET mirror to the standard coil mirror (the larger mirror that points toward projector's screen at the back of the scanning room) using the scotch tape strips you prepared before. Put it more or less in the center, although this position may need to be adjusted (being careful and with the same precautions explained before). Do not touch the surface of the ET mirror.</p> <p></p> <p>The infrared mirror MUST be airtight attached</p> <p>It is critical that there is no air gap between the infrared mirror and the standard mirror. Also, make sure the scotch tape is firmly glued to the standard mirror because the infrared mirror will be hanging when placed on the coil and may loosen up creating a gap with the standard mirror.</p> <p>Suggestion</p> <p>Since we are going to track the right eye only, it is useful to displace the infrared mirror to the right from the participant's standpoint and cut the scotch tape narrower to occlude less surface of the mirrors on the right side.</p> </li> <li> <p> Place the mirror frame back on the head coil. As always, DO NOT TOUCH THE MIRROR.</p> </li> </ul>"},{"location":"data-collection/pre-session/#back-outside-the-scanner-room-control-room","title":"Back OUTSIDE THE SCANNER ROOM (control room)","text":"<ul> <li> <p> Plug in the Power strip containing the ET Power Cable, the PC-tower power, etc      </p> </li> <li> <p> Switch on the ET PC-tower. Select \"Eyelink\" when given the option of which operating system to launch.</p> <p></p> </li> <li> <p> This is the sync box of the scanner, allowing a synchronization of the triggers between the scanner sequence and the ET recordings.</p> <p></p> </li> <li> <p> Switch on \u2588\u2588\u2588 and log-in with the username \u2588\u2588\u2588 and password <code>*****</code>.</p> </li> <li> <p> Connect to the ET to the \u2588\u2588\u2588 laptop with the ethernet cable (blue color).</p> </li> </ul> <p></p> <ul> <li> <p> Connect the sync box to the laptop with the USB cable. It is normally plugged into the \u2588\u2588\u2588, it must be re-plugged in after usage.</p> <p></p> </li> <li> <p> Connect the \u2588\u2588\u2588 laptop to the screen switch box (see picture below) with the corresponding HDMI cable. This should project your screen on the screen of CHUV's tower \u2588\u2588\u2588.     </p> <p>If the monitor does not automatically switch the source of the screen, you can use the button below to switch it.</p> <p></p> </li> <li> <p> Connect the MMBT-S Trigger Interface Box adapter (pink USB cable) to one of the USB ports of the laptop \u2588\u2588\u2588.     </p> <p>The MMBT-S Trigger Interface MUST be connected to the laptop AFTER the trigger USB cable coming from the SyncBox. </p> </li> <li> <p>Your laptop connections should now look like this.</p> <p></p> </li> <li> <p> Configure the display settings of the laptop to mirror outputs and set a resolution of 800x600 for both screens. That step and that exact resolution is crucial for the eye-tracker calibration to work.</p> </li> <li> <p> Configure the display settings of the laptop to mirror outputs and set a resolution of 800x600 for both screens.</p> </li> <li> Double check that the IP address corresponding to the ethernet interface of the \u2588\u2588\u2588 laptop is correct. You can either run <code>ifconfig -a</code> or use the GUI. Make sure the IP/mask is 100.1.1.2/24, and the protocol is IP version 4. Execute <code>ping 100.1.1.1</code> to see if the ET is responding to echoes.</li> <li> <p> Check that the service to synchronize the triggers is up with <code>sudo systemctl status forward-trigger</code>.</p> <p>If the service is down, manually force its start</p> <ul> <li> Run <code>sudo systemctl start forward-trigger</code></li> <li> Recheck the status with <code>sudo systemctl status forward-trigger</code>.</li> </ul> <p>These commands are executed with <code>sudo</code></p> <p>The console will prompt you for the common user password: <code>*****</code></p> </li> <li> <p> Check that you can send trigger events manually:</p> <ul> <li> Enter the \"Synchronization\" menu by selecting it and pushing the enter button .</li> <li> Hit the down arrow button  until you find \"Send trigger\"</li> <li> Push the enter button  every time you want to send an s character.</li> <li> Check that the \u2588\u2588\u2588 laptop types those triggers (e.g., on an open editor receiving keypresses, or the shell prompt).</li> <li> Check that the BIOPAC is properly registering the trigger too. Every trigger sent should be seen in the AcqKnowledge GUI.</li> </ul> </li> <li> <p> Start the syncbox session:</p> <ul> <li> Push the up arrow button  until you find \"Start session\"</li> <li> Push the enter button  and the syncbox will be now waiting for the scanner's trigger signal to forward it.</li> </ul> </li> </ul>"},{"location":"data-collection/pre-session/#final-checks-inside-the-scanning-room","title":"Final checks inside the scanning room","text":"<ul> <li> Prepare padding: under-knee padding, neck padding, inflatable head-padding.<ul> <li> Wrap a sanitary cover around each padding.</li> <li> The head padding should be chosen and adjusted to each participant depending on their head size so that their nose is only 1-2mm away from the anterior part of the coil.     The anterior part of the head coil will be tight around the participant's nose, so ensure they are nonetheless comfortable.</li> </ul> </li> <li> Prepare a blanket.</li> <li> Prepare a new pair of earplugs.</li> <li> Check the RB, ECG, and nasal cannula are prepared.</li> </ul>"},{"location":"data-collection/preliminary/","title":"Preliminary work","text":""},{"location":"data-collection/preliminary/#once-at-the-beginning-of-the-project","title":"Once, at the beginning of the project","text":""},{"location":"data-collection/preliminary/#setting-up-the-scanner-protocol-at-the-mr-console","title":"Setting up the scanner protocol at the MR console","text":"<p>The pilot phase will conclude when the protocol is decided upon. Once finalized the protocol design, it will be frozen and it cannot be changed anymore.</p> <ul> <li> (Optional) Load an existing protocol</li> <li> <p> Edit the protocol as needed</p> <p>Follow Reproin conventions</p> <p>When assigning names to the MR sequences in the protocol, make sure to follow the Reproin conventions to maximally facilitate the conversion into BIDS.</p> </li> <li> <p> Update the Number of measurements in all <code>func-bold_task-*</code> sequences, according to the previously recorded timings:</p> \\[N_\\text{measurements} = L_t / \\text{TR}, \\quad t \\in \\{\\text{bht}, \\text{qct}, \\text{rest}\\},\\] <p>where \\(L_t\\) is the length of a particular task \\(t\\) (either BHT, QCT, or resting state) in seconds as timed before, and \\(\\text{TR}\\) is the repetition time of the BOLD sequence, in seconds.</p> </li> <li> <p> Save the protocol</p> <p>Logging in as an advanced user is required before saving the protocol</p> <p>As a good practice, always work as the standard user <code>janedoe</code>. However, you MUST change into advanced user mode before saving the protocol.</p> <p>Simultaneously press the Tab + Delete +  on the control-computer's keyboard:</p> <p>Username: <code>superjanedoe</code></p> <p>Password: <code>******</code></p> <p>After three wrong password entries, access will be denied, and only a Siemens engineer will be able to unlock the MR scanner.</p> <ul> <li> Open the Dot-Cockpit window     </li> <li> In <code>Browse</code>, find the right folder to save the protocol in (RESEARCH \u2937 Oscar).</li> <li> Right click on the folder and select New \u2937 Program. This opens an empty page in the program editor      </li> <li> Select all the sequences you want to run from the sequence list and click right to copy.     </li> <li> Drag or paste the copied sequences in the program editor.     </li> <li> Once finished, click on the floppy disk icon () in the upper left to save.</li> <li> Give the protocol a relevant name starting with the date of acquisition in the format YYYYMMDD and click Save.     </li> <li> If desired, the protocol details can also be downloaded as a pdf on a peripherical USB key.<ul> <li> Right-click on the protocol and select Print</li> <li> Save the PDF in your USB key.</li> </ul> </li> <li> Make sure you save a different protocol for each of the four PE directions (i.e., AP, PA, LR, RL).</li> </ul> </li> </ul>"},{"location":"data-collection/preliminary/#install-the-biopac","title":"Install the BIOPAC","text":"<ul> <li> Make sure you understand the components and settings of the BIOPAC, described above.</li> <li> Set up the line frequency switches on the back of the BIOPAC amplifier depending on your country frequency to reduce noise. Both switches should be DOWN if your country's line frequency is 50Hz. Both switches should be UP if your country's line frequency line is 60Hz.     </li> <li> Plug the different units of the BIOPAC together if it has not been done yet.</li> <li> Ensure that the Mode switch of the MMBT-S Trigger Interface Box adapter (pink color box) is set on the P position.</li> <li> Install the BIOPAC recording software (AcqKnowledge).</li> <li> <p> Create a template graph file (<code>EXP_BASE.gtl</code>)</p> <p>Creating the AcqKnowledge's template graph file</p> <ul> <li> Creating a graph file requires the BIOPAC system powered up and connected to the \u2588\u2588\u2588 computer.</li> <li> Add the RB module<ul> <li> Check the channel on top switch of the unit: the DA100C MUST be set on channel 1.</li> <li> Under the tab Analog, click on Add new module.</li> <li> Find the name of the BIOPAC unit corresponding to the DA100C.</li> <li> Set the module settings (gain, filters, etc.) corresponding to those of the configuration switches in the front of the module.</li> <li> When prompted to enter the calibration points, map the interval [-5, 0] to [0, 10]. You invert the sign of the interval for the interpretation to be more clear.</li> </ul> </li> <li> Add the ECG module<ul> <li> Check the channel on top switch of the unit: the ECG100C MRI MUST be set on channel 2.</li> <li> Under the tab Analog, click on Add new module.</li> <li> Find the name of the BIOPAC unit corresponding to the ECG100C.</li> <li> Set the module settings (gain, filters, etc.) corresponding to those of the configuration switches in the front of the module.</li> <li> When prompted to enter [calibration?], for the ECG you should map the interval ?? to ??.</li> </ul> </li> <li> Add the GA module<ul> <li> Confirm that the CO<sub>2</sub> output of the GA is connected through the ANISO filter to the channel 3 of the AMI100C module.</li> <li> Under the tab Analog, click on Add new module.</li> <li> Select Custom and then indicate it is connected to channel 3 by selecting AMI/HLT - in3.</li> <li> When prompted to enter the calibration points, map the interval [0.03, 1.0] to [0, 10.0].</li> </ul> </li> <li> Add the Digital inputs<ul> <li> Under the tab Digital, click on Add new module.</li> <li> The parallel cable feeds into ports D8-D15.</li> </ul> </li> <li> Configure the sampling frequency</li> <li> Configure the experiment length (at least 2.5 hours)</li> <li> Configure whether you want to collect directly to hard disk and autosave settings</li> <li> Save the experiment, making sure you choose a \"graph template file\" (with extension <code>.gtl</code>)</li> </ul> </li> </ul>"},{"location":"data-collection/preliminary/#install-the-gas-analyzer-ga","title":"Install the gas analyzer (GA)","text":""},{"location":"data-collection/preliminary/#install-psychopy-for-stimuli-presentation-and-development","title":"Install Psychopy for stimuli presentation and development","text":"<p>This block describes how to prepare an environment with a running Psychopy 3 installation.</p> <p>Multiple screens</p> <p>If you want to use multiple screens, install the corresponding libxcb extension:</p> <pre><code>sudo apt-get install libxcb-xinerama0\n</code></pre> <ul> <li> Clone the Psychopy repository:     <pre><code>git clone git@github.com:psychopy/psychopy.git\n</code></pre></li> <li> Navigate to the Psychopy directory:     <pre><code>cd psychopy\n</code></pre></li> <li> Psychopy should not be installed with Anaconda.     If an anaconda environment is activated, run the following command to deactivate it:     <pre><code>conda deactivate\n</code></pre></li> <li> Update Pypi to the latest version:     <pre><code>python3 -m pip install -U pip\n</code></pre></li> <li> Update Numpy to the latest version:     <pre><code>python3 -m pip install -U numpy\n</code></pre></li> <li> Install bdist_mpkg, py2app and attrdict:     <pre><code>python3 -m pip install attrdict py2app bdist_mpkg\n</code></pre></li> <li> Install wxPython.     <pre><code>python3 -m pip install -U \\\n    -f https://extras.wxpython.org/wxPython4/extras/linux/gtk3/ubuntu-$( lsb_release -r -s ) \\\n    wxPython\n</code></pre></li> <li> Install Psychopy using the following command:     <pre><code>pip3 install -e .\n</code></pre></li> <li> <p> Try opening Psychopy by typing:     <pre><code>psychopy --no-splash -b\n</code></pre></p> The first time it runs, Psychopy will likely request some increased permissions <ul> <li> Add a new <code>psychopy</code> group to your system.     <pre><code>sudo groupadd --force psychopy\n</code></pre></li> <li> Add your current user to the new group:     <pre><code>sudo usermod -a -G psychopy $USER\n</code></pre></li> <li> Raise security thresholds for Psychopy, by inserting the following into <code>/etc/security/limits.d/99-psychopylimits.conf</code>:     <pre><code>@psychopy - nice -20\n@psychopy - rtprio 50\n@psychopy - memlock unlimited\n</code></pre></li> </ul> </li> </ul> Psychopy crashes when trying to run a experiment: <code>pyglet.gl.ContextException: Could not create GL context</code> <p>This is likely related to your computer having a GPU and a nonfunctional configuration:</p> <pre><code>$ glxinfo | grep PyOpenGL\nX Error of failed request:  BadValue (integer parameter out of range for operation)\n  Major opcode of failed request:  151 (GLX)\n  Minor opcode of failed request:  24 (X_GLXCreateNewContext)\n  Value in failed request:  0x0\n  Serial number of failed request:  110\n  Current serial number in output stream:  111\n</code></pre> <p>A quick attempt to solve this would be adding our user to the <code>video</code> group.</p> <p>However, that is unlikely to work out so you'll need to take more actions (see this, and this)</p> Psychopy crashes when trying to run a experiment: <code>qt.qpa.plugin: Could not load the Qt platform plugin 'xcb'</code> <p>If you installed <code>libxcb-xinerama0</code>, or you don't have multiple screens, first try:</p> <pre><code>python3 -m pip uninstall opencv-python\npython3 -m pip install opencv-python-headless\n</code></pre> <p>If that doesn't work, try a brute force solution by installing libxcb fully:</p> <pre><code>sudo apt-get install libxcb-*\n</code></pre>"},{"location":"data-collection/preliminary/#preparing-the-stimuli-presentation-laptop","title":"Preparing the Stimuli presentation laptop (\u2588\u2588\u2588)","text":""},{"location":"data-collection/preliminary/#prepare-the-psychopy-experiments","title":"Prepare the Psychopy experiments","text":"<ul> <li> Log on \u2588\u2588\u2588 with the username \u2588\u2588\u2588 and password <code>*****</code>.</li> <li> Fork the HCPh-fMRI-tasks repository under your user on GitHub.</li> <li> Clone the HCPh-fMRI-tasks repository:     <pre><code>git clone git@github.com:&lt;your-gh-username&gt;/HCPh-fMRI-tasks.git\n</code></pre></li> <li> Set-up the original repository as upstream remote:     <pre><code>git remote add upstream git@github.com:theaxonlab/HCPh-fMRI-tasks.git\n</code></pre></li> <li> Open Psychopy and (optionally) a experiment file corresponding to a task by typing the following command in the terminal:     <pre><code>psychopy task-qct_bold.psyexp\n</code></pre></li> <li> For each task, check the following:<ul> <li> <code>task-qct_bold.psyexp</code> (positive-control task, QCT) :<ul> <li> time it to confirm the length, and</li> <li> check the task runs properly.</li> </ul> </li> <li> <code>task-rest_bold.psyexp</code> (resting-state fMRI):<ul> <li> time it to confirm the length, and</li> <li> check that the movie is played.</li> </ul> </li> <li> <code>task-bht_bold.psyexp</code> (breath-holding task, BHT):<ul> <li> time it to confirm the length, and</li> <li> check the task runs properly.</li> </ul> </li> </ul> </li> </ul>"},{"location":"data-collection/preliminary/#setting-up-a-synchronization-service","title":"Setting up a synchronization service","text":"<p>It's fundamental to have a reliable means of communication with the BIOPAC digital inputs</p> <p>The following guidelines set up a little service on a linux box that keeps listening for key presses (mainly, the s trigger from the trigger box), and RPC (remote procedure calls) from typically Psychopy or similar software.</p> <p>The service is spun up automatically when you connect the MMBT-S modem interface that communicates with the BIOPAC (that is, the N-shaped pink box)</p> <ul> <li> Copy the latest version of the code to send triggers</li> <li> To automatically start the program when the BIOPAC is connected, create a udev rule as follows:     <pre><code>sudo nano /etc/udev/rules.d/99-forward-trigger.rules\n</code></pre></li> <li> Add the following rule to the file:     <pre><code>ACTION==\"add\", KERNEL==\"ttyACM0\", SUBSYSTEM==\"tty\", TAG+=\"systemd\", ENV{SYSTEMD_WANTS}=\"forward-trigger.service\"\n</code></pre></li> <li> Save the file and exit the editor.</li> <li> Run the following command to reload the udev rules:     <pre><code>sudo udevadm control --reload-rules\n</code></pre></li> <li> Create a systemd service unit file:     <pre><code>sudo nano /etc/systemd/system/forward-trigger.service\n</code></pre></li> <li> Add the following content to the file (Adapt the path to forward-trigger.py to the location on your computer):     <pre><code>[Unit]\nDescription=Forward Trigger Service\nAfter=network.target\n\n[Service]\nExecStart=/usr/bin/python3 /path/to/forward-trigger.py\nWorkingDirectory=/path/to/forward-trigger/directory\nStandardOutput=null\n\n[Install]\nWantedBy=multi-user.target\n</code></pre></li> <li> Save the file and exit the text editor.</li> <li> Run the following command to enable the service to start at boot:     <pre><code>sudo systemctl enable forward-trigger\n</code></pre></li> <li> Run the following command to reload the systemd daemon:     <pre><code>sudo systemctl daemon-reload\n</code></pre></li> </ul> Testing the service without the syncbox connected <ul> <li> Ensure <code>socat</code> and <code>screen</code> are installed (if not already):       <pre><code>sudo apt-get update\nsudo apt-get install socat screen\n</code></pre></li> <li> Create a virtual serial port and establish a symbolic link to <code>/dev/ttyACM0</code> using the following command:       <pre><code>sudo socat PTY,link=/tmp/virtual_serial_port PTY,link=/dev/ttyACM0,group-late=dialout,mode=666,b9600\n</code></pre></li> <li> With <code>screen</code>, listen to the new virtual serial port:       <pre><code>screen /dev/ttyACM0\n</code></pre></li> <li> Press s and verify that <code>^A</code> appears in the screen terminal.</li> </ul>"},{"location":"data-collection/preliminary/#installing-eyelink-eye-tracker-software","title":"Installing EyeLink (eye tracker software)","text":"<ul> <li> <p> Log on \u2588\u2588\u2588 with the username \u2588\u2588\u2588 and password <code>*****</code>.</p> </li> <li> <p> Enable Canonical's universe repository with the following command:     <pre><code>sudo add-apt-repository universe\nsudo apt update\n</code></pre></p> </li> <li> Install and update the ca-certificates package:     <pre><code>sudo apt update\nsudo apt install ca-certificates\n</code></pre></li> <li> Add the SR Research Software Repository signing key:     <pre><code>sudo apt-key adv --fetch-keys https://apt.sr-research.com/SRResearch_key\n</code></pre></li> <li> Install the EyeLink Developers Kit:     <pre><code>sudo apt install eyelink-display-software\n</code></pre></li> <li> Install the EyeLink Data Viewer:     <pre><code>sudo apt install eyelink-dataviewer\n</code></pre></li> </ul>"},{"location":"data-collection/preliminary/#every-two-months","title":"Every two months","text":""},{"location":"data-collection/preliminary/#calibrate-the-ga","title":"Calibrate the GA","text":"A gas mixture bottle with a known CO<sub>2</sub> and O<sub>2</sub> concentrations is necessary <p>CO<sub>2</sub> concentration must be between 5% and 10%, while O<sub>2</sub> within 5% and 21%. A second reference mixture is necessary, and room air can be used, knowing that atmospheric contents by volume are 0.039 \u00b10.001% for CO<sub>2</sub> and 20.946 \u00b10.003% for O<sub>2</sub>.</p> <ul> <li> Connect the GA to the BIOPAC as described above.</li> <li> Connect the BIOPAC to the Physiology recording laptop (\u2588\u2588\u2588) as described above.</li> <li> Connect the AcqKnowledge License Key into a USB Port of the Physiology recording laptop (\u2588\u2588\u2588).</li> <li> Open AcqKnowledge software on the Physiology recording laptop (\u2588\u2588\u2588).</li> <li> Open the template graph file (<code>EXP_BASE.gtl</code>)</li> <li> Edit the configuration of the inputs 3 (connected to the CO<sub>2</sub> output of the GA) and 4 (connected to the O<sub>2</sub> output of the GA).     Lower and upper calibration points can be set by sampling the input a number of times with the AcqKnowledge utility.</li> <li> Overwrite the template graph file <code>EXP_BASE.gtl</code>.</li> </ul>"},{"location":"data-collection/scanning-notes/","title":"Notes on the scanner's console and recording devices","text":""},{"location":"data-collection/scanning-notes/#quick-guide-to-the-protocol-settings-and-configuration","title":"Quick guide to the protocol settings and configuration","text":""},{"location":"data-collection/scanning-notes/#editing-a-sequence","title":"Editing a sequence","text":"<ul> <li> Double click on the sequence name.</li> <li> <p> After editing the sequence, you MUST store the changes if you want them to be kept by clicking on the Go button:</p> <p></p> </li> </ul>"},{"location":"data-collection/scanning-notes/#setting-sequences-for-automatic-start","title":"Setting sequences for automatic start","text":"<ul> <li> <p> You can set the worker icon on the left of the sequence by clicking on it if you want to pause before starting that sequence. If the worker is not present, the sequence will launch automatically.</p> <p></p> </li> <li> <p> Blocks with a name between double underscores <code>__*__</code> introduce an Exam Paused break.     Such breaks prompt a modal dialog with the Exam Paused title like this:</p> <p></p> <p>The Patient has Contrast Agent checkbox MUST always be unchecked, as this protocol does not involve a contrast agent\"</p> </li> <li> <p> Click Continue when you are ready to proceed.</p> </li> </ul>"},{"location":"data-collection/scanning-notes/#setting-the-fov","title":"Setting the FoV","text":"<p>Using the anatomical image to adjust the field-of-view (FoV) is RECOMMENDED</p> <ul> <li> Drag and drop the protocol's stack icon (\ud83d\uddc7) corresponding to the <code>anat-T1w__mprage</code> sequence into the image viewer.     The icon will appear AFTER the image has been acquired.</li> </ul> <ul> <li> Make sure that the FOV (yellow square) includes the whole brain by tilting or translating the FOV. If the full brain, including the cerebellum, do not fit in the FOV, favorise making sure that the cortex is fully enclosed in the yellow square. For reproducibility, it is better if the FOV across sequences have a similar center and a similar tilt. However, if it is not possible, the priority remains to include the whole brain in the FOV.</li> <li> If two sequences have the same resolution and the same number of slices, you can copy paste the FOV<ul> <li> Open the sequence for which you want to adjust the FOV/geometry</li> <li> Right click on the sequence for which the FOV has already been carefully positioned</li> <li> Select <code>Copy Parameters</code></li> <li> <code>Center of slice groups and saturation regions</code></li> </ul> </li> <li> <p> Once the FOV is well placed, store the new settings of the sequence by pressing Go.</p> <p></p> </li> </ul>"},{"location":"data-collection/scanning-notes/#eye-tracker-calibration-process","title":"Eye-Tracker Calibration Process","text":"<ul> <li> <p> On the eye-tracking (ET) computer, ensure that the appropriate calibration type is selected (9-point for QCT and 5-point for resting state and breath-holding tasks):</p> <ul> <li> Click on Set Options located on the right side of ET computer screen.</li> <li> <p> Under Calibration type in the top left corner, choose the image containing either 9 or 5 points.</p> <p></p> </li> </ul> </li> <li> <p> Two crosses should appear on the ET computer screen: one at the center of the pupil and the other at the center of the corneal reflection.</p> <p>If the two crosses do not appear, the coverage, focus and intensity of the ET are incorrect</p> <ul> <li> Repeat the steps for their setting up given in the participant's preparation section</li> </ul> </li> <li> <p> Initiate the ET calibration by pressing C on the laptop keyboard or by clicking on Calibration on the ET interface.</p> </li> <li> <p> Once the participant's gaze stabilizes on the first fixation point, the Accept Fixation button turns green.     Click on it to confirm the initial position.</p> <p></p> </li> <li> <p> Subsequent positions should be automatically validated when the gaze remains stable.     If not, manually click the Accept Fixation button when it turns green.</p> </li> <li> After the calibration, ensure that the fixation points' positions match the expected pattern corresponding to the 9- or 5-point calibration.     If the pattern appears too distorted, restart the calibration.</li> <li> Upon successful calibration, initiate validation by clicking Validation on the ET interface or pressing the V key on the laptop keyboard. Follow the same instructions as in the calibration to validate positions.</li> <li> If validation fails, repeat previous steps and restart calibration. Otherwise, you can leave the calibration mode and proceed with the task program by pressing the Esc key on the laptop (\u2588\u2588\u2588).</li> </ul>"},{"location":"data-collection/scanning-notes/#scanner-interface","title":"Scanner interface","text":"<p>The picture below shows you the scanner interface as you will see it when you operate the MR machine. The arrow points to the screen and the red circles indicate the control buttons. </p>"},{"location":"data-collection/scanning-notes/#scanners-settings-buttons","title":"Scanner's settings buttons","text":"<p>Adjust settings by pressing the respective button and then turning the central knob (1) to adjust the setting to the desired level:</p> <p></p> <ul> <li> Use the headphones  button (2) to adjust the volume of the earphones.</li> <li> Use the speaker  button (3) to adjust the volume of the air speaker in the scanning room.</li> <li> Use the light  button (4) to adjust the intensity of the illumination inside the scanning room.</li> <li> Use the fan  button (5) to adjust the ventilation in the scanning room.</li> </ul> <p>The central knob (button 1) will turn off the alarm if pushed when the alarm is on</p>"},{"location":"data-collection/scanning-notes/#standard-extraction-of-the-participant","title":"Standard extraction of the participant","text":"<p>There are two options to extract the participant, when the session has concluded or within the session if the participant needs to be extracted and there is no emergency (e.g., in case of technical error the scanner does not permit continuing the session and it needs to be aborted).</p> The participant can be extracted by pressing the extraction button (bottom arrow in the leftmost picture) and then genly rolling the central knob. Alternatively, you can just press the Home  button (rightmost picture)."},{"location":"data-collection/scanning/","title":"Running the scanning session","text":"<p>Familiarize with emergency procedures</p> <p>You MUST know the security procedures in case of problem and keep yourself updated with changes. Some of the emergency procedures are found here.</p> <p>In addition to the brief guidelines given in these SOPs, further safety information is found in \u2588\u2588\u2588.</p>"},{"location":"data-collection/scanning/#during-the-session","title":"During the session","text":"<ul> <li> Check in with the participant frequently, not necessarily only at the scripted points.</li> <li> Watch for motion and arousal state using the ET's camera.       If you detect motion or the participant falls asleep at inadequate points, use the speaker to inform them.</li> </ul>"},{"location":"data-collection/scanning/#check-experimental-setup","title":"Check experimental setup","text":"<p>DO NOT FORGET to check the readiness of the experimental setup at this point</p> <ul> <li> Check the trigger box:<ul> <li> the box is on,</li> <li> Synchronization mode is on,</li> <li> session has been started,</li> <li> USB cable to \u2588\u2588\u2588 is connected.</li> </ul> </li> <li> Check the GA:<ul> <li> the tubing coming from the scanning room is properly connected,</li> <li> the CO<sub>2</sub> BNC output is plugged through the filter to the BIOPAC AMI200, on input channel 3,</li> <li> the exhaust cap IS REMOVED</li> <li> the GA is on (switch it on if necessary),</li> <li> ensure the PUMP IS ON, and</li> <li> turn the pump's power knob to MAXIMUM position.</li> </ul> </li> <li> Check \u2588\u2588\u2588:<ul> <li> has enough battery, and plug the power cord if necessary;</li> <li> USB cable to the MMBT-S Trigger Interface Box is connected;</li> <li> serial cable from the MMBT-S Trigger Interface Box is connected to the back of the SPT100D digital interface (gray block) of the BIOPAC;</li> <li> computer is ready, with psychopy open, and with the appropriate version of experiments; and</li> <li> leave the computer with a pleasant screen projecting (e.g., a gray background).</li> </ul> </li> <li> Check \u2588\u2588\u2588:<ul> <li> has enough battery, and plug the power cord if necessary;</li> <li> computer is ready, with the AcqKnowledge software open and collecting data;</li> <li> check the ECG and RB signals, and fix unanticipated problems (e.g., the respiration belt needs to be fastened tighter);</li> <li> the Amphetamine app is running and keeping the computer unlocked while AcqKnoledge is working.</li> </ul> </li> </ul>"},{"location":"data-collection/scanning/#acquire-a-localizer-aahead_scout","title":"Acquire a localizer (AAhead_scout)","text":"<ul> <li> <p> Indicate the participant that the scanning will soon start:</p> Tell the participant that we are starting <p>Hey [NAME], we are about to start our first scan run.</p> <p>This is going to be a long session, so please make sure you are feeling as comfortable as you possibly can in there. Remember not to cross your legs or hold your hands together and check your back is also comfortable. I'm going to ask you to take a deep breath now, so I can check the respiration belt is properly set up. If it is too tight, please let me know.</p> <p>[Allow a few moments for the participant to breathe while you check the recordings]</p> <p>Okay, we seem to be able to track your respiration. Is the respiration belt too restraining? This is also a good moment to swallow, and to check your neck and head are in a comfortable position.</p> <p>For this first part, all you have to do is stay still; you can relax and close your eyes if it helps.</p> <p>Are you ready?</p> </li> <li> <p> Wait for the participant confirmation and set the speaker off afterward.</p> </li> <li> Launch the <code>AAhead_scout_64ch-head-coil</code> protocol by pressing Continue .</li> <li> <p> Once the localizer is concluded, you can drag and drop the image stack icon (something like \ud83d\uddc7, with an object on the top stack) onto the image viewer. That will open the localizer on the viewer.</p> <p></p> </li> </ul>"},{"location":"data-collection/scanning/#if-the-localizer-presents-very-low-quality","title":"If the localizer presents very low quality","text":"<p>The localizer may present very low quality if the head-coil has not been properly initiated by the scanner</p> <ul> <li> Enter the scanning room, extract the participant from the scanner by pressing the home () button.</li> <li> Tell the participant that you need to reset the head coil</li> <li> Unplug and replug the head coil</li> <li> Check that the coil has been properly detected in the scanner's monitor</li> <li> Re-insert the participant in the scanner</li> <li> Re-run the <code>AAhead_scout_{32,64}ch-head-coil</code> protocol.</li> </ul>"},{"location":"data-collection/scanning/#acquire-a-high-resolution-anatomical-image","title":"Acquire a high-resolution, anatomical image","text":"<ul> <li> <p> Launch the <code>anat-T1w__mprage</code> protocol by pressing Continue .</p> <p>While you are still running the MPRAGE sequence</p> <ul> <li> Open the parameters of the sequence named <code>fmap-phasediff__gre</code> and ensure that under Contrast \u2937 Reconstruction the option Magnitude et phase is selected. This is crucial so that both the magnitude and the phase difference field map images are saved.</li> <li> Repeat the configuration of Magnitude et phase for all sequences name <code>fmap-epi_acq-bold_dir-{RL,LR,PA,AP}__*</code>.</li> <li> Repeat the configuration of Magnitude et phase for all sequences name <code>func-bold_task-{bht,qct,rest}_dir-{RL,LR,PA,AP}__cmrr_me4_sms4</code>.</li> <li> Open the <code>dwi-dwi_dir-{RL,LR,PA,AP}__279dir_monopolar</code> sequence and under the section Diff., uncheck all the derivatives except for Diff. Weighted Image.</li> </ul> </li> </ul>"},{"location":"data-collection/scanning/#acquire-the-diffusion-mri-run","title":"Acquire the diffusion MRI run","text":"<ul> <li> Adjust the FoV of the <code>dwi-dwi_dir-{RL,LR,PA,AP}__279dir_monopolar</code> sequence as indicated below.</li> <li> Verify again the <code>dwi-dwi_dir-{RL,LR,PA,AP}__279dir_monopolar</code> parameters under section Diff. All the derivatives MUST be unchecked except for Diff. Weighted Image.</li> <li> <p> Inform the participant that the diffusion scan will follow.</p> Only for the participant of Cohort I <p>Hey Oscar, we are ready to proceed with the diffusion scan. The BIOPAC is functional and AcqKnowledge is properly registering the respiration belt and ECG. The gas analyzer is ON, but it is still warming up. The psychopy computer is ready. Are you ready?</p> Participant of Cohort II <p>Hey [NAME], the next block is a bit long, around 30 minutes.</p> <p>You can close your eyes and even sleep if you wish.</p> <p>I'm going to give you a short time (ten seconds or so) to swallow, and perhaps accommodate your back or your arms. However, please try not to move your head.</p> <p>It is critical that you don't move, especially at all at the very beginning and the next 20 seconds after you hear the first blipping sounds.</p> <p>Try to minimize swallowing, and eye movements (for example, blinking) and try to maintain comfortable and shallow breathing.</p> <p>Are you ready?</p> </li> <li> <p> Launch the diffusion <code>dwi-dwi_dir-{RL,LR,PA,AP}__279dir_monopolar</code> sequence by pressing Continue .</p> </li> <li> While it is running, adjust the FoV for the following sequence.</li> </ul> <p>At this point, the GA should have finished the warm-up so you can verify it is working</p> <ul> <li> Ask the participant to take three deep breathes, to then go back to a comfortable, normal respiration pace. Check on the AcqKnoledge window that the three breathes are distinctly registered (taking into account that there may be 10-25 seconds of delay because of the tubing).</li> </ul>"},{"location":"data-collection/scanning/#once-the-main-diffusion-mri-run-is-done-proceed-with-fieldmaps","title":"Once the main diffusion MRI run is done, proceed with fieldmaps","text":"<ul> <li> Launch the DWI-EPI sequence <code>fmap-epi_acq-b0_dir-{RL,LR,PA,AP}__6dir_monopolar</code> for B<sub>0</sub> field mapping by pressing Continue .</li> <li> While it is running, adjust the FoV for the following sequence.</li> <li> Launch the GRE (phase difference) sequence <code>fmap-phasediff__gre</code> for B<sub>0</sub> field mapping by pressing Continue .</li> <li> While it is running,<ul> <li> Adjust the FoV for the following sequence.</li> <li> Verify that in the next sequence parameters under Contrast&gt;Reconstruction the option Magnitude et phase is selected!</li> </ul> </li> <li> Launch the BOLD-EPI sequence <code>fmap-epi_acq-bold_dir-{RL,LR,PA,AP}__cmrr_me4_sms4</code> for B<sub>0</sub> field mapping by pressing Continue .</li> <li> While the fieldmap sequence is running,<ul> <li> Adjust the FoV for the positive-control-task (<code>func-bold_task-qct_dir-{RL,LR,PA,AP}__cmrr_me4_sms4</code>) fMRI sequence following the abovementioned steps, and</li> <li> verify the Number of measurements with respect to the task's timing (2min 38s).</li> <li> Verify that the positive-control task <code>task-qct_bold.psyexp</code> is open in psychopy, that you calibrated the ET.</li> </ul> </li> </ul>"},{"location":"data-collection/scanning/#acquire-the-functional-mri-block","title":"Acquire the functional MRI block","text":"<ul> <li> <p> Inform the participant about the fMRI block</p> Starting the fMRI block - calibrating the eye tracker <p>Hey [NAME], we are now to move into measuring the activity of your brain.</p> <p>Is everything alright thus far?</p> <p>[Allow some time for response]</p> <p>Before we start, we need to calibrate the eye-tracker device, which follows your right eye during experiments.</p> <p>Your are going to see a round fixation point, and the point is going to move randomly over the screen space. Please follow it with your gaze, trying to look at it as stable as possible and without moving your head.</p> <p>Are you ready?</p> </li> <li> <p> Wait for confirmation, respond to follow-up comments, and initiate the ET calibration (instructions below)</p> </li> </ul>"},{"location":"data-collection/scanning/#quality-control-task-qct","title":"Quality-control task (QCT)","text":"<ul> <li> Verify that the task's program is awaiting the scanner's trigger to start.</li> <li> <p> Inform the participant that we will proceed with the quality-control task (QCT). Repeat task instructions.</p> Starting the positive control task <p>Hey [NAME], thanks for your collaboration with the eye tracking calibration.</p> <p>The following block will collect some behavioral data and requires your collaboration. You will be exposed to several activities.</p> <p>Whenever you see a red circle, please fix your gaze on it, wherever it is shown on the screen. If the red circle moves, we ask you to follow it with your eyes.</p> <p>Some other times, you'll see either \"RIGHT\" or \"LEFT\" written on the screen. During those times, please tap your thumb and the other fingers of your right or left hand as indicated on the screen.</p> <p>Before we start, please leave the alarm button on your tummy to free your hand for finger tapping. Please do not hesitate to grab it in case you need to squeeze it.</p> </li> <li> <p> Launch the <code>func-bold_task-qct_dir-{RL,LR,PA,AP}__cmrr_me4_sms4</code> protocol by pressing Continue .</p> </li> <li> Wait for the calibration scans to be finished (the process is reported on the bottom left corner of the console) and verify that the first volume's trigger signal was received by \u2588\u2588\u2588 (meaning CHECK that the task program was initiated).</li> <li> While it is running:<ul> <li> Adjust the FoV for the following sequence,</li> <li> verify the Number of measurements with respect to the task's timing (20min 6s), and</li> <li> double check that it has the setting Magnitude et phase selected in the drop-down menu under Contrast&gt;Reconstruction.</li> </ul> </li> <li> Once the sequence is over, close the current experiment on psychopy and open <code>task-rest_bold.psyexp</code>.</li> </ul>"},{"location":"data-collection/scanning/#resting-state-fmri","title":"Resting state fMRI","text":"<ul> <li> <p> Inform the participant:</p> Quick re-calibration the ET before continuing <p>Thanks [NAME], that was a short behavioral task.</p> <p>Before moving on, we will run another calibration of the eye tracker, please follow the moving fixation point.</p> <p>Is everything alright?</p> </li> <li> <p> Wait for confirmation, respond to follow-up comments, and initiate the ET calibration (instructions below)</p> </li> <li> Once the ET is calibrated, verify that the task is left and awaiting for the sequence's trigger to start.</li> <li> <p> Inform the participant that the next sequence is resting-state fMRI (rsfMRI).</p> Starting the resting-state block <p>Hey [NAME], we are about to start resting-state fMRI.</p> <p>For this scan, all you have to do is stay still, and look at the movie. Please do not close your eyes, and it is particularly critical that you don't move at all in the initial moments of the acquisition block.</p> <p>Are you ready?</p> </li> <li> <p> Launch the rsfMRI sequence <code>func-bold_task-rest_dir-{RL,LR,PA,AP}__cmrr_me4_sms4</code> by pressing Continue .</p> </li> <li> While it is running:<ul> <li> Adjust the FoV for the following sequence,</li> <li> verify the Number of measurements with respect to the task's timing (5min 41s), and</li> <li> double check that it has the setting Magnitude et phase selected in the drop-down menu under Contrast&gt;Reconstruction.</li> </ul> </li> <li> Once the sequence is over, close the current experiment on psychopy and open <code>task-bht_bold.psyexp</code>.</li> </ul>"},{"location":"data-collection/scanning/#breath-holding-task-bht","title":"Breath-holding task (BHT)","text":"<ul> <li> <p> Inform the participant:</p> Quick re-calibration the ET before continuing <p>Thanks [NAME], that was a long behavioral block.</p> <p>Before moving on, we will run another calibration of the eye tracker, please follow the moving fixation point.</p> <p>Is everything alright?</p> </li> <li> <p> Wait for confirmation, respond to follow-up comments, and initiate the ET calibration (instructions below)</p> </li> <li> Once the ET is calibrated, verify that the task is left and awaiting for the sequence's trigger to start.</li> <li> <p> Inform the participant that the next sequence is breath-holding task fMRI. Repeat the instructions for the task.</p> Starting the breath-holding task <p>Hey [NAME], we will proceed now with a breath-holding task.</p> <p>I remind you that you have to breathe following the cues of the colored rectangle.</p> <p>Green means \"BREATHE IN\", orange means \"BREATHE OUT\" and red means \"HOLD YOUR BREATH\".</p> <p>Remember to not follow the breathing instructions during the first block and to exhale the small amount of air you have remaining at the end of the hold.</p> <p>Are you ready?</p> </li> <li> <p> Launch the <code>func-bold_task-bht_dir-{RL,LR,PA,AP}__cmrr_me4_sms4</code> sequence by pressing Continue .</p> </li> <li> While it is running, determine whether there is enough time to run the anatomical T2-weighted run. If so, adjust the FoV for the following sequence.</li> </ul> <p>ONLY if time permits</p> <ul> <li> Launch the <code>anat-T2w__flair</code> protocol by pressing Continue </li> </ul>"},{"location":"data-collection/scanning/#concluding-the-session","title":"Concluding the session","text":"<ul> <li> <p> Inform the participant:</p> Session is finished <p>Thanks [NAME], the session has concluded and we will shortly let you out of the scanner.</p> </li> </ul> <p>These operations may be done during the T2w acquisition</p> <ul> <li> Stop the AcqKnowledge recording on the \u2588\u2588\u2588 computer.</li> <li> Switch the BIOPAC MP160 module off.</li> <li> Turn off the pump of the GA.</li> <li> Switch the GA off.</li> <li> Put the exhaust and inlet caps back.</li> </ul> <ul> <li> The exam is over, you can proceed with the tear-down protocol.</li> </ul>"},{"location":"data-collection/tear-down/","title":"Session tear-down","text":""},{"location":"data-collection/tear-down/#showing-the-participant-out","title":"Showing the participant out","text":"<ul> <li> <p> Enter the scanner room, and announce yourself to the participant:</p> <p>Hi [NAME], thanks a lot for your collaboration. We will get you out in a second.</p> </li> <li> <p> Extract the participant following the standard procedure.</p> </li> <li> Unplug the head coil from the bed connector, lift the lever that releases the upper part of the coil and put it aside (e.g., inside the bore or on a chair next to the scanner).</li> <li> Remove the tape band across the coil and touching the participants forehead.</li> <li> Lift the nasal cannula and put it away so the participant does not get tangled.</li> <li> Assist the participant to remove the padding elements around their head.</li> <li> Help the participant sit down.</li> <li> Instruct the participant to remove the earplugs and dispose of them.</li> <li> <p> Ask them about the experience:</p> Get feedback about the session from the participant <p>[NAME], how was your experience? Have you been able to feel comfortable throughout the session? What advice, indication do you feel we could've provided you for a better experience?</p> </li> <li> <p> Disconnect the tube from the RB and then lift the velcro attachment to remove the RB.</p> </li> <li> Prepare the belt on the bed to be removed from the room when you show the participant out.</li> <li> Help the participant carefully remove the ECG leads.</li> <li> Disconnect the three ECG terminals from the cable and put them in their pouch.</li> <li> Disconnect the last section of the cannula and dispose of it in the trash can.</li> <li> Help the participant step down and accompany them out to the control room.</li> <li> Help the participant recover their personal belongings and change clothes if necessary.</li> <li> Solicit more feedback on participant's comfort for future sessions.</li> <li> Solicit tickets and receipts for transportation.</li> <li> Give the participant the corresponding compensation for the participation and transportation.</li> <li> Ask the participant to sign the receipt of the amount of the financial compensation.</li> </ul>"},{"location":"data-collection/tear-down/#clearing-up-the-scanning-room","title":"Clearing up the Scanning Room","text":""},{"location":"data-collection/tear-down/#et-arm-et-cables-infrared-mirror-and-stimuli-screen","title":"ET arm, ET cables, infrared mirror and stimuli screen","text":"<ul> <li> Unplug the two cables (signal and power) connected to the ET arm.     Put their extremities aside far from the scanner.</li> <li> <p> Agree with another experimenter, who will exit the room, sit on the other side of the access tubes in the Control Room, and pull cables (fiber and power of the ET) and tubes (RB and GA) out of the room.     At the same time, you carefully feed them so they do not suffer abrasion from touching the edges of the tube.</p> <p>Extracting the cables and tubes requires two experimenters</p> </li> <li> <p> The experimenter currently outside in the Control Room will re-enter the Scanner Room with the plastic bag of the mirror and a fresh pair of gloves and will leave them prepared on the bed.</p> </li> <li> Remove the mirror frame from its rails mounted on the head coil and lay it on the bed.</li> <li> <p> Put the gloves on and detach the infrared mirror from the standard mirror.</p> <p>The infrared mirror MUST be manipulated with clean gloves at all times.</p> </li> <li> <p> Immediately insert the infrared mirror back into its plastic pouch.</p> </li> <li> Take the pouch containing the infrared mirror outside to the Control Room and place it back in its designated box, with extreme care.</li> <li> Clean the standard mirror removing all residues of glue from the scotch tape.</li> <li> Re-attach the mirror to the coil's frame.</li> <li> Take the projector's screen off and store it in its designated shelf.</li> <li> Disconnect the ECG cable from the filter of the access panel, roll the cable.</li> </ul>"},{"location":"data-collection/tear-down/#readying-the-scanner-for-the-next-session","title":"Readying the scanner for the next session","text":"<p>Every setting altered for the experiment MUST be put back to its original status at the end of the experiment (e.g., position of the bed, coil, emergency button, padding elements, etc.)</p> <ul> <li> <p> Put the used bed-sheet and the blanket inside the soiled linen bag.</p> <p>Put them away in the trash if they are disposable</p> </li> <li> <p> Dispose all single-use sanitary protections.</p> </li> <li> Put the pillows back in their designated storage places.</li> <li> Remove the head coil and put it in the scanner's bore.</li> <li> Remove the back padding elements and put them back in their designated storage.</li> <li> Reinstall the spine coil.</li> <li> <p> Wipe the bed and the head coil (bottom and upper parts).</p> <p>Cleaning wipes are available on shelf in the Scanning Room.</p> </li> <li> <p> Lock the head coil back with its bottom part without plugging the connectors.</p> </li> <li> <p> Put the head coil away with the other head-coils on the shelf next to the scanner.</p> <p>If the next user is already there or you know the current coil will be also used in the next session, plug it back into the bed socket.</p> </li> <li> <p> Return the bed to its Home position by pressing the  button (more info).</p> </li> <li> Take the ET arm outside to the Control Room and place it in a stable place.</li> <li> Take the ECG electrodes, ECG cable, the RB, and the plexiglass panel outside to the control room.</li> <li> Exit and close the external door.</li> </ul>"},{"location":"data-collection/tear-down/#clearing-up-the-control-room","title":"Clearing up the Control Room","text":""},{"location":"data-collection/tear-down/#finalize-the-boxing-of-the-et-elements","title":"Finalize the boxing of the ET elements","text":"<ul> <li> Put the lens cover.</li> <li> Unscrew the ET lens, while ALWAYS keeping one hand under the lens while screwing/unscrewing it and put it back into its pouch.     </li> <li> <p> Store the ET arm in its designated box.</p> <p>REMEMBER | the infrared mirror is inside that box already: DO NOT crush the mirror.</p> </li> </ul>"},{"location":"data-collection/tear-down/#finalize-the-boxing-of-other-physiological-recording-instruments","title":"Finalize the boxing of other physiological recording instruments","text":"<ul> <li> Store the ECG cable and the pouch with the ECG leads in its designated box / storage.</li> <li> Carefully roll the fiber and power cable of the ET, and place them in the rolling table of the ET PC.</li> <li> Carefully roll the GA tube and put it in its designated bag.</li> <li> Carefully roll the RB tube and put it in its designated bag.</li> <li> Disconnect the MMBT-S Interface, and the two corresponding cables (pink USB, 25-pin parallel), and insert them in their designated bags.</li> <li> Remove the cable connecting the GA to the AMI100D module of the BIOPAC, roll it and put it in its designated bag.</li> <li> Put the GA and the corresponding cables in the designated box.</li> <li> Disconnect and bag the remaining cables connected to the BIOPAC:<ul> <li> Ethernet to the \u2588\u2588\u2588 computer.</li> <li> Power cord.</li> </ul> </li> <li> Retrieve and bag the AcqKnowledge USB License Key from the \u2588\u2588\u2588 computer.</li> <li> Store the fMRI box, BIOPAC and GA boxes back in room \u2588\u2588\u2588.</li> </ul>"},{"location":"data-collection/tear-down/#finalizing-with-the-ets-pc","title":"Finalizing with the ET's PC","text":"<ul> <li> Exit the EyeLink 1000 Plus Host PC application by pressing Ctrl+Alt+Q on the ET PC and next click on the Shutdown button from the File Manager toolbar.</li> <li> Secure the rolled cable with the scotch tape on the ET PC Tower.</li> <li> Take the ET PC Tower and the plexiglass back into room \u2588\u2588\u2588.</li> <li> Switch the projector off before exiting room \u2588\u2588\u2588.</li> </ul>"},{"location":"data-collection/tear-down/#finalizing-the-support-laptops","title":"Finalizing the support laptops","text":"<ul> <li> Unplug from \u2588\u2588\u2588 the USB cable coming from the SyncBox.</li> <li> Switch the SyncBox off, and make sure you leave it connected exactly as you found it.</li> <li> Unplug from \u2588\u2588\u2588 the HDMI cable from the display switch.</li> <li> Check that you leave the display switch as you found it.</li> <li> Switch off the \u2588\u2588\u2588 computer.</li> <li> Exit the Amphetamine session and lock the screen of the \u2588\u2588\u2588 computer.</li> </ul>"},{"location":"data-collection/tear-down/#turn-off-the-mri-system-if-no-more-sessions-are-scheduled-afterward","title":"Turn off the MRI system if no more sessions are scheduled afterward","text":"<p>It is critical to follow the steps in order, ensuring each step is completed before proceeding further</p> <p></p> <ul> <li> Turn off the satellite station (\u2588\u2588\u2588, the computer on the left side of the control desk)</li> <li> Turn off the control station (\u2588\u2588\u2588, the computer on the right side of the control desk)</li> <li> Push the blue button displaying an overdotted circle and the SYSTEM OFF label above, which is found right above the key</li> <li> Turn the key into the closed lock position ()</li> </ul>"},{"location":"data-management/mriqc/","title":"QC of unprocessed data","text":""},{"location":"data-management/mriqc/#executing-mriqc","title":"Executing MRIQC","text":"<ul> <li> Register the MRIQC container with DataLad containers-run</li> <li> Run MRIQC:     <pre><code>datalad containers-run \\\n    --container-name containers/mriqc \\\n    --input sourcedata \\\n    --output . \\\n    '{inputs}' '{outputs}' participant --session lastsession -w workdir\n</code></pre></li> <li> Screen the T1w, DWI and BOLD visual reports, assign a quality assessment using Q'Kay</li> <li> If either the dMRI or the RSfMRI quality is insufficient, schedule an extra session after the initially-planned scanning period to reacquire it.</li> </ul>"},{"location":"data-management/post-session/","title":"Post-session retrieval and BIDS","text":""},{"location":"data-management/post-session/#within-48h-after-the-first-session","title":"Within 48h after the FIRST session","text":"<p>Anatomical images must be screened for incidental findings within 48h after the first session</p> <ul> <li> Send the T1-weighted and T2-weighted scan to \u2588\u2588\u2588 for screening and incidental findings.</li> <li> Indicate on our recruits spreadsheet that the participant's first session has been submitted for screening.</li> <li> Wait for response from \u2588\u2588\u2588 and note down the result of the screening in our our recruits spreadsheet.</li> </ul> <p>To do so, you'll need to first download the data from PACS and then convert the data into BIDS as indicated below.</p> <p>What to do when there are incidental findings</p> <ul> <li> Discuss with \u2588\u2588\u2588 how to proceed with the participant.</li> <li> Exclude the participant from the study if \u2588\u2588\u2588 evaluates they don't meet the participation (inclusion and exclusion) criteria.</li> </ul>"},{"location":"data-management/post-session/#within-one-week-after-the-completed-session","title":"Within one week after the completed session","text":""},{"location":"data-management/post-session/#download-the-data-from-the-pacs-with-pacsman-only-authorized-users","title":"Download the data from the PACS with PACSMAN (only authorized users)","text":"<ul> <li> Log-in into the PACSMAN computer  (**)</li> <li> Mount a remote filesystem through sshfs:     <pre><code>sshfs &lt;hostname&gt;:/data/datasets/hcph-pilot-sourcedata \\\n               $HOME/data/hcph-pilot \\\n      &lt;args&gt;\n</code></pre></li> <li> Edit the query file <code>vim $HOME/queries/last-session.csv</code> (most likely, just update with the session's date) mydata-onesession.csv<pre><code>PatientID,StudyDate\n2022_11_07*,20230503\n</code></pre></li> <li> Prepare and run PACSMAN, pointing the output to the mounted directory.     <pre><code>pacsman --save -q $HOME/queries/last-session.csv \\\n       --out_directory $HOME/data/hcph-pilot/ \\\n       --config /opt/PACSMAN/files/config.json\n</code></pre></li> <li> Remove write permissions on the newly downloaded data:     <pre><code>chmod -R a-w $HOME/data/hcph-pilot/sub-01/ses-*\n</code></pre></li> <li> Unmount the remote filesystem:     <pre><code>sudo umount $HOME/data/hcph-pilot\n</code></pre></li> </ul>"},{"location":"data-management/post-session/#retrieve-physiological-recordings-from","title":"Retrieve physiological recordings (from \u2588\u2588\u2588\u2588)","text":""},{"location":"data-management/post-session/#copy-original-dicom-datasets-into-the-archive-of-stockage-horus","title":"Copy original DICOM datasets into the archive of Stockage hOrus","text":"<ul> <li> <p> Setup a cron job to execute automatically the synchronization:</p> <pre><code>crontab -e\n[ within your file editor add the following line ]\n0 2 * * * rsync -avurP /data/datasets/hcph-pilot-sourcedata* &lt;user&gt;@&lt;host&gt;:&lt;path&gt;/sourcedata-pilot &amp;&gt; $HOME/var/log/data-curnagl.log\n</code></pre> </li> </ul>"},{"location":"data-management/post-session/#within-two-weeks-after-the-completed-session","title":"Within two weeks after the completed session","text":""},{"location":"data-management/post-session/#convert-data-to-bids-with-heudiconv","title":"Convert data to BIDS with HeuDiConv","text":"<p>We use HeuDiConv to convert from the DICOM format generated by the scanner. In addition, starting from the piloting session five, we abide by ReproIn conventions. To support backward compatibility (and some extra, currently unsupported features by the original heuristic file), we have our own heuristic file.</p> Our custom heuristic file <p>Our heuristic file largely derives from ReproIn's at the time of writing. The heuristic has a a <code>protocols2fix: dict[str | re.Pattern[str], list[tuple[str, str]]]</code> (lines 113-148), where replacement patterns to permit backward compatibility are written.</p> <pre><code># emacs: -*- mode: python; py-indent-offset: 4; indent-tabs-mode: nil -*-\n# vi: set ft=python sts=4 ts=4 sw=4 et:\n#\n# Copyright 2023 The Axon Lab &lt;theaxonlab@gmail.com&gt;\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#     http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n# We support and encourage derived works from this project, please read\n# about our expectations at\n#\n#     https://www.nipreps.org/community/licensing/\n#\n# STATEMENT OF CHANGES: This file is derived from sources licensed under the Apache-2.0 terms,\n# and this file has been changed.\n# The original file this work derives from is found at:\n# https://github.com/nipy/heudiconv/blob/55524168b02519bbf0a3a1c94cafb29a419728a0/heudiconv/heuristics/reproin.py\n#\n# ORIGINAL WORK'S ATTRIBUTION NOTICE:\n#\n#     Copyright [2014-2019] [Heudiconv developers]\n#\n#     Licensed under the Apache License, Version 2.0 (the \"License\");\n#     you may not use this file except in compliance with the License.\n#     You may obtain a copy of the License at\n#\n#         http://www.apache.org/licenses/LICENSE-2.0\n#\n#     Unless required by applicable law or agreed to in writing, software\n#     distributed under the License is distributed on an \"AS IS\" BASIS,\n#     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#     See the License for the specific language governing permissions and\n#     limitations under the License.\n\"\"\"Reproin heuristic.\"\"\"\n\nfrom __future__ import annotations\n\nfrom warnings import warn\nfrom collections import Counter\nimport logging\nimport re\n\nimport pydicom as dcm\n\nfrom heudiconv.utils import SeqInfo\nfrom heudiconv.heuristics.reproin import (\n    _apply_substitutions,\n    get_study_hash,\n    get_study_description,\n)\n\nlgr = logging.getLogger(\"heudiconv\")\n\n\nDWI_RES = {\n    \"1.6mm-iso\": \"highres\",\n    \"2mm-iso\": \"lowres\",\n}\n\n\nIGNORE_PROTOCOLS = (\n    \"DEV\",\n    \"LABEL\",\n    \"REPORT\",\n    \"ADC\",\n    \"TRACEW\",\n    \"FA\",\n    \"ColFA\",\n    \"B0\",\n    \"TENSOR\",\n    \"10meas\",  # dismiss a trial of fmap acquisition\n    \"testJB\",  # dismiss a test trial of the cmrr sequence\n)\n\nbids_regex = re.compile(r\"_(?=(dir|acq|task|run)-([A-Za-z0-9]+))\")\n\n\n# Terminology to harmonise and use to name variables etc\n# experiment\n#  subject\n#   [session]\n#    exam (AKA scanning session) - currently seqinfo, unless brought together from multiple\n#     series  (AKA protocol?)\n#      - series_spec - deduced from fields the spec (literal value)\n#      - series_info - the dictionary with fields parsed from series_spec\n\n# Which fields in seqinfo (in this order) to check for the ReproIn spec\nseries_spec_fields = (\"protocol_name\", \"series_description\")\n\n# dictionary from accession-number to runs that need to be marked as bad\n# NOTE: even if filename has number that is 0-padded, internally no padding\n# is done\nfix_accession2run: dict[str, list[str]] = {\n    # e.g.:\n    # 'A000035': ['^8-', '^9-'],\n}\n\n# A dictionary containing fixes/remapping for sequence names per study.\n# Keys are md5sum of study_description from DICOMs, in the form of PI-Experimenter^protocolname\n# You can use `heudiconv -f reproin --command ls --files  PATH\n# to list the \"study hash\".\n# Values are list of tuples in the form (regex_pattern, substitution).\n# If the  key is an empty string`''''`, it would apply to any study.\nprotocols2fix: dict[str | re.Pattern[str], list[tuple[str, str]]] = {\n    \"\": [\n        (\"t1_mprage_pre_Morpho\", \"anat-T1w_acq-morphobox__mprage\"),\n        (\n            \"micro_struct_137dir_BIPOLAR_b3000_1.6mm-iso\",\n            \"dwi-dwi_acq-highres_dir-unknown__137dir_bipolar\",\n        ),\n        (\n            \"micro_struct_137dir_BIPOLAR_b3000_1.6mm-iso\",\n            \"dwi-dwi_acq-highres_dir-unknown__137dir_bipolar\",\n        ),\n        (\n            \"micro_struct_137dir_BIPOLAR_b3000_2mm-iso\",\n            \"dwi-dwi_acq-lowres_dir-unknown__137dir_bipolar\",\n        ),\n        (\"gre_field_mapping_1.6mmiso\", \"fmap-phasediff__gre\"),\n        (\n            \"cmrr_mbep2d_bold_me4_sms4_fa75_750meas\",\n            \"func-bold_task-rest__750meas\",\n        ),\n        (\n            \"cmrr_mbep2d_bold_me4_sms4_fa80\",\n            \"func-bold_task-rest_acq-fa80__cmrr\",\n        ),\n        (\n            \"cmrr_mbep2d_bold_me4_testJB\",\n            \"func-bold_task-rest_acq-testJB__cmrr\",\n        ),\n        (\n            \"cmrr_mbep2d_bold_fmap_fa80\",\n            \"fmap-epi_acq-bold_dir-unknown__cmrr_mbepd2d_fa80\",\n        ),\n        (\"cmrr_mbep2d_bold_me4_sms4\", \"func-bold_task-qct__cmrr\"),\n        (\"_task-qc_\", \"_task-qct_\"),\n        (\"anat-T2w__flair\", \"anat-FLAIR__spcir\"),\n        (\"AAHead_Scout_.*\", \"anat-scout\"),\n    ]\n    # e.g., QA:\n    # '43b67d9139e8c7274578b7451ab21123':\n    #     [\n    #      ('BOLD_p2_s4_3\\.5mm', 'func_task-rest_acq-p2-s4-3.5mm'),\n    #      ('BOLD_', 'func_task-rest'),\n    #      ('_p2_s4',        '_acq-p2-s4'),\n    #      ('_p2', '_acq-p2'),\n    #     ],\n    # '':  # for any study example with regexes used\n    #     [\n    #         ('AAHead_Scout_.*', 'anat-scout'),\n    #         ('^dti_.*', 'dwi'),\n    #         ('^.*_distortion_corr.*_([ap]+)_([12])', r'fmap-epi_dir-\\1_run-\\2'),\n    #         ('^(.+)_ap.*_r(0[0-9])', r'func_task-\\1_run-\\2'),\n    #         ('^t1w_.*', 'anat-T1w'),\n    #         # problematic case -- multiple identically named pepolar fieldmap runs\n    #         # I guess we will just sacrifice ability to detect canceled runs here.\n    #         # And we cannot just use _run+ since it would increment independently\n    #         # for ap and then for pa.  We will rely on having ap preceding pa.\n    #         # Added  _acq-mb8  so they match the one in funcs\n    #         ('func_task-discorr_acq-ap', r'fmap-epi_dir-ap_acq-mb8_run+'),\n    #         ('func_task-discorr_acq-pa', r'fmap-epi_dir-pa_acq-mb8_run='),\n    # ]\n}\n\n# list containing StudyInstanceUID to skip -- hopefully doesn't happen too often\ndicoms2skip: list[str] = [\n    # e.g.\n    # '1.3.12.2.1107.5.2.43.66112.30000016110117002435700000001',\n]\n\nDEFAULT_FIELDS = {\n    # Let it just be in each json file extracted\n    \"Acknowledgements\": \"See README.md.\",\n}\n\nPOPULATE_INTENDED_FOR_OPTS = {\n    \"matching_parameters\": [\"ImagingVolume\", \"Shims\"],\n    \"criterion\": \"Closest\",\n}\n\n\ndef filter_dicom(dcmdata: dcm.dataset.Dataset) -&gt; bool:\n    \"\"\"Return True if a DICOM dataset should be filtered out, else False\"\"\"\n    return True if dcmdata.StudyInstanceUID in dicoms2skip else False\n\n\ndef filter_files(_fn: str) -&gt; bool:\n    \"\"\"Return True if a file should be kept, else False.\n\n    ATM reproin does not do any filtering. Override if you need to add some\n    \"\"\"\n    return not _fn.endswith((\".csv\", \".dvs\"))\n\n\ndef fix_canceled_runs(seqinfo: list[SeqInfo]) -&gt; list[SeqInfo]:\n    \"\"\"Function that adds cancelme_ to known bad runs which were forgotten\"\"\"\n    if not fix_accession2run:\n        return seqinfo  # nothing to do\n    for i, s in enumerate(seqinfo):\n        accession_number = s.accession_number\n        if accession_number and accession_number in fix_accession2run:\n            lgr.info(\n                \"Considering some runs possibly marked to be \"\n                \"canceled for accession %s\",\n                accession_number,\n            )\n            # This code is reminiscent of prior logic when operating on\n            # a single accession, but left as is for now\n            badruns = fix_accession2run[accession_number]\n            badruns_pattern = \"|\".join(badruns)\n            if re.match(badruns_pattern, s.series_id):\n                lgr.info(\"Fixing bad run {0}\".format(s.series_id))\n                fixedkwargs = dict()\n                for key in series_spec_fields:\n                    fixedkwargs[key] = \"cancelme_\" + getattr(s, key)\n                seqinfo[i] = s._replace(**fixedkwargs)\n    return seqinfo\n\n\ndef fix_dbic_protocol(seqinfo: list[SeqInfo]) -&gt; list[SeqInfo]:\n    \"\"\"Ad-hoc fixup for existing protocols.\n\n    It will operate in 3 stages on `protocols2fix` records.\n    1. consider a record which has md5sum of study_description\n    2. apply all substitutions, where key is a regular expression which\n       successfully searches (not necessarily matches, so anchor appropriately)\n       study_description\n    3. apply \"catch all\" substitutions in the key containing an empty string\n\n    3. is somewhat redundant since `re.compile('.*')` could match any, but is\n    kept for simplicity of its specification.\n    \"\"\"\n\n    study_hash = get_study_hash(seqinfo)\n    study_description = get_study_description(seqinfo)\n\n    # We will consider first study specific (based on hash)\n    if study_hash in protocols2fix:\n        _apply_substitutions(\n            seqinfo, protocols2fix[study_hash], \"study (%s) specific\" % study_hash\n        )\n    # Then go through all regexps returning regex \"search\" result\n    # on study_description\n    for sub, substitutions in protocols2fix.items():\n        if isinstance(sub, re.Pattern) and sub.search(study_description):\n            _apply_substitutions(\n                seqinfo, substitutions, \"%r regex matching\" % sub.pattern\n            )\n    # and at the end - global\n    if \"\" in protocols2fix:\n        _apply_substitutions(seqinfo, protocols2fix[\"\"], \"global\")\n\n    return seqinfo\n\n\ndef fix_seqinfo(seqinfo: list[SeqInfo]) -&gt; list[SeqInfo]:\n    \"\"\"Just a helper on top of both fixers\"\"\"\n    # add cancelme to known bad runs\n    seqinfo = fix_canceled_runs(seqinfo)\n    seqinfo = fix_dbic_protocol(seqinfo)\n    return seqinfo\n\n\ndef create_key(template, outtype=(\"nii.gz\",), annotation_classes=None):\n    if template is None or not template:\n        raise ValueError(\"Template must be a valid format string\")\n    return template, outtype, annotation_classes\n\n\ndef infotodict(seqinfo):\n    \"\"\"Heuristic evaluator for determining which runs belong where\n\n    allowed template fields - follow python string module:\n\n    item: index within category\n    subject: participant id\n    seqitem: run number during scanning\n    subindex: sub index within group\n    \"\"\"\n    seqinfo = fix_seqinfo(seqinfo)\n    lgr.info(\"Processing %d seqinfo entries\", len(seqinfo))\n\n    t1w = create_key(\n        \"sub-{subject}/{session}/anat/sub-{subject}_{session}_acq-{acquisition}{run_entity}_T1w\"\n    )\n    t2w = create_key(\n        \"sub-{subject}/{session}/anat/sub-{subject}_{session}{run_entity}_T2w\"\n    )\n    t2_flair = create_key(\n        \"sub-{subject}/{session}/anat/sub-{subject}_{session}{run_entity}_FLAIR\"\n    )\n    dwi = create_key(\n        \"sub-{subject}/{session}/dwi/sub-{subject}_{session}_acq-{acq}_dir-{dir}{run_entity}_dwi\"\n    )\n    mag = create_key(\n        \"sub-{subject}/{session}/fmap/sub-{subject}_{session}{run_entity}_magnitude\"\n    )\n    phdiff = create_key(\n        \"sub-{subject}/{session}/fmap/sub-{subject}_{session}{run_entity}_phasediff\"\n    )\n    epi = create_key(\n        \"sub-{subject}/{session}/fmap/sub-{subject}_{session}\"\n        \"_acq-{acquisition}_dir-{dir}{run_entity}{part_entity}_epi\"\n    )\n    func = create_key(\n        \"sub-{subject}/{session}/func/sub-{subject}_{session}\"\n        \"_task-{task}{acq_entity}{dir_entity}{run_entity}{part_entity}_bold\"\n    )\n    sbref = create_key(\n        \"sub-{subject}/{session}/func/sub-{subject}_{session}_task-{task}{run_entity}_sbref\"\n    )\n\n    info = {\n        t1w: [],\n        t2w: [],\n        t2_flair: [],\n        dwi: [],\n        mag: [],\n        phdiff: [],\n        epi: [],\n        func: [],\n        sbref: [],\n    }\n    epi_mags = []\n    bold_mags = []\n\n    for s in seqinfo:\n        \"\"\"\n        The namedtuple `s` contains the following fields:\n\n        * total_files_till_now\n        * example_dcm_file\n        * series_id\n        * dcm_dir_name\n        * unspecified2\n        * unspecified3\n        * dim1\n        * dim2\n        * dim3\n        * dim4\n        * TR\n        * TE\n        * protocol_name\n        * is_motion_corrected\n        * is_derived\n        * patient_id\n        * study_description\n        * referring_physician_name\n        * series_description\n        * image_type\n        \"\"\"\n\n        # Ignore derived data and reports\n        if (\n            s.is_derived == \"True\"\n            or s.is_derived is True\n            or s.dcm_dir_name.split(\"_\")[-1] in IGNORE_PROTOCOLS\n        ):\n            continue\n\n        thisitem = {\n            \"item\": s.series_id,\n        }\n        thiskey = None\n        thisitem.update({k: v for k, v in bids_regex.findall(s.protocol_name)})\n        thisitem[\"run_entity\"] = f\"{thisitem.pop('run', '')}\"\n\n        if s.protocol_name.lower().startswith(\"anat-t1w\"):\n            thiskey = t1w\n            acquisition_present = thisitem.pop(\"acq\", None)\n            thisitem[\"acquisition\"] = (\n                (\"original\" if s.dcm_dir_name.endswith(\"_ND\") else \"undistorted\")\n                if not acquisition_present\n                else acquisition_present\n            )\n        elif s.protocol_name.lower().startswith(\"anat-t2w\"):\n            thiskey = t2w\n        elif s.protocol_name.lower().startswith(\"anat-flair\"):\n            thiskey = t2_flair\n        elif s.protocol_name.startswith(\"dwi-dwi\"):\n            thiskey = dwi\n        elif s.protocol_name.startswith(\"fmap-phasediff\"):\n            thiskey = phdiff if \"P\" in s.image_type else mag\n        elif s.protocol_name.startswith(\"fmap-epi\"):\n            thiskey = epi\n            thisitem[\"part_entity\"] = \"\"\n            thisitem[\"acquisition\"] = (\n                \"b0\" if s.sequence_name.endswith(\"ep_b0\") else \"bold\"\n            )\n\n            # Check whether phase was written out:\n            # 1. A magnitude needs to exist immediately before in the dicom info\n            # 2. Magnitude and phase must have the same number of volumes\n            series_id_idx, series_id_name = s.series_id.split(\"-\", 1)\n            prev_series_id = f\"{int(series_id_idx) - 1}-{series_id_name}-{s.series_files}\"\n            if prev_series_id in epi_mags:\n                thisitem[\"part_entity\"] = \"_part-phase\"\n                info[thiskey][epi_mags.index(prev_series_id)][\"part_entity\"] = \"_part-mag\"\n\n            epi_mags.append(f\"{s.series_id}-{s.series_files}\")\n\n        elif s.protocol_name.startswith(\"func-bold\"):\n            # Likely an error\n            if s.series_files &lt; 100:\n                warn(\n                    f\"Dropping exceedingly short BOLD file with {s.series_files} time points.\"\n                )\n                continue\n\n            thiskey = func\n\n            thisitem[\"part_entity\"] = \"\"\n            # Some functional runs may come with acq\n            func_acq = thisitem.pop(\"acq\", None)\n            thisitem[\"acq_entity\"] = \"\" if not func_acq else f\"_acq-{func_acq}\"\n\n            # Some functional runs may come with dir\n            func_dir = thisitem.pop(\"dir\", None)\n            thisitem[\"dir_entity\"] = \"\" if not func_dir else f\"_dir-{func_dir}\"\n\n            # Check whether phase was written out:\n            # 1. A magnitude needs to exist immediately before in the dicom info\n            # 2. Magnitude and phase must have the same number of volumes\n            series_id_idx, series_id_name = s.series_id.split(\"-\", 1)\n            prev_series_id = f\"{int(series_id_idx) - 1}-{series_id_name}-{s.series_files}\"\n            if prev_series_id in bold_mags:\n                thisitem[\"part_entity\"] = \"_part-phase\"\n                info[thiskey][bold_mags.index(prev_series_id)][\"part_entity\"] = \"_part-mag\"\n\n            bold_mags.append(f\"{s.series_id}-{s.series_files}\")\n\n        if thiskey is not None:\n            info[thiskey].append(thisitem)\n\n    for mod, items in info.items():\n        if len(items) &lt; 2:\n            continue\n\n        info[mod] = _assign_run_on_repeat(items)\n\n    return info\n\n\ndef _assign_run_on_repeat(modality_items):\n    \"\"\"\n    Assign run IDs for repeated inputs for a given modality.\n\n    Examples\n    --------\n    &gt;&gt;&gt; _assign_run_on_repeat([\n    ...     {\"item\": \"discard1\", \"acq\": \"bold\", \"dir\": \"PA\"},\n    ...     {\"item\": \"discard2\", \"acq\": \"bold\", \"dir\": \"AP\"},\n    ...     {\"item\": \"discard3\", \"acq\": \"bold\", \"dir\": \"PA\"},\n    ... ])  # doctest: +NORMALIZE_WHITESPACE\n    [{'item': 'discard1', 'acq': 'bold', 'dir': 'PA', 'run_entity': '_run-1'},\n     {'item': 'discard2', 'acq': 'bold', 'dir': 'AP'},\n     {'item': 'discard3', 'acq': 'bold', 'dir': 'PA', 'run_entity': '_run-2'}]\n\n    &gt;&gt;&gt; _assign_run_on_repeat([\n    ...     {\"item\": \"discard1\", \"acq\": \"bold\", \"dir\": \"PA\"},\n    ...     {\"item\": \"discard2\", \"acq\": \"bold\", \"dir\": \"AP\"},\n    ...     {\"item\": \"discard3\", \"acq\": \"bold\", \"dir\": \"PA\"},\n    ...     {\"item\": \"discard4\", \"acq\": \"bold\", \"dir\": \"AP\"},\n    ... ])  # doctest: +NORMALIZE_WHITESPACE\n    [{'item': 'discard1', 'acq': 'bold', 'dir': 'PA', 'run_entity': '_run-1'},\n     {'item': 'discard2', 'acq': 'bold', 'dir': 'AP', 'run_entity': '_run-1'},\n     {'item': 'discard3', 'acq': 'bold', 'dir': 'PA', 'run_entity': '_run-2'},\n     {'item': 'discard4', 'acq': 'bold', 'dir': 'AP', 'run_entity': '_run-2'}]\n\n    &gt;&gt;&gt; _assign_run_on_repeat([\n    ...     {\"item\": \"discard1\", \"acq\": \"bold\", \"dir\": \"PA\", \"run\": \"1\"},\n    ...     {\"item\": \"discard2\", \"acq\": \"bold\", \"dir\": \"AP\"},\n    ...     {\"item\": \"discard3\", \"acq\": \"bold\", \"dir\": \"PA\", \"run\": \"2\"},\n    ... ])  # doctest: +NORMALIZE_WHITESPACE\n    [{'item': 'discard1', 'acq': 'bold', 'dir': 'PA', 'run': '1'},\n     {'item': 'discard2', 'acq': 'bold', 'dir': 'AP'},\n     {'item': 'discard3', 'acq': 'bold', 'dir': 'PA', 'run': '2'}]\n\n    &gt;&gt;&gt; _assign_run_on_repeat([\n    ...     {\"item\": \"discard1\", \"acq\": \"bold\", \"dir\": \"PA\", \"run_entity\": \"_run-1\"},\n    ...     {\"item\": \"discard2\", \"acq\": \"bold\", \"dir\": \"AP\"},\n    ...     {\"item\": \"discard3\", \"acq\": \"bold\", \"dir\": \"PA\", \"run_entity\": \"_run-2\"},\n    ... ])  # doctest: +NORMALIZE_WHITESPACE\n    [{'item': 'discard1', 'acq': 'bold', 'dir': 'PA', 'run_entity': '_run-1'},\n     {'item': 'discard2', 'acq': 'bold', 'dir': 'AP'},\n     {'item': 'discard3', 'acq': 'bold', 'dir': 'PA', 'run_entity': '_run-2'}]\n\n    &gt;&gt;&gt; _assign_run_on_repeat([\n    ...     {\"item\": \"discard1\", \"acq\": \"bold\", \"dir\": \"PA\", \"part_entity\": \"_part-mag\"},\n    ...     {\"item\": \"discard2\", \"acq\": \"bold\", \"dir\": \"PA\", \"part_entity\": \"_part-phase\"},\n    ...     {\"item\": \"discard3\", \"acq\": \"bold\", \"dir\": \"AP\", \"part_entity\": \"_part-mag\"},\n    ...     {\"item\": \"discard4\", \"acq\": \"bold\", \"dir\": \"AP\", \"part_entity\": \"_part-phase\"},\n    ... ])  # doctest: +NORMALIZE_WHITESPACE\n    [{'item': 'discard1', 'acq': 'bold', 'dir': 'PA', 'part_entity': '_part-mag'},\n     {'item': 'discard2', 'acq': 'bold', 'dir': 'PA', 'part_entity': '_part-phase'},\n     {'item': 'discard3', 'acq': 'bold', 'dir': 'AP', 'part_entity': '_part-mag'},\n     {'item': 'discard4', 'acq': 'bold', 'dir': 'AP', 'part_entity': '_part-phase'}]\n\n    \"\"\"\n    modality_items = modality_items.copy()\n\n    str_patterns = [\n        \"_\".join([f\"{s[0]}-{s[1]}\" for s in item.items() if s[0] != \"item\"])\n        for item in modality_items\n    ]\n    strcount = Counter(str_patterns)\n\n    for string, count in strcount.items():\n        if count &lt; 2:\n            continue\n\n        runid = 1\n\n        for index, item_string in enumerate(str_patterns):\n            if string == item_string:\n                modality_items[index].update(\n                    {\n                        \"run_entity\": f\"_run-{runid}\",\n                    }\n                )\n                runid += 1\n\n    return modality_items\n</code></pre> <p>During piloting, we changed a number of settings</p> <p>For example, the first four sessions did not follow Reproin conventions and filenames varied substantially. Please note the <code>protocols2fix</code> variable in our heuristic file, where the compatibility is implemented.</p> <ul> <li> <p> Run HeuDiConv with our heuristic file <code>&lt;path&gt;/code/heudiconv/heuristic_reproin.py</code>:</p> Executing HeuDiConv<pre><code>#!/bin/bash\nheudiconv -s \"001\" -ss \"pilot001\" -b -l . -o /data/datasets/hcph/ \\\n          -f &lt;sops_clone_path&gt;/code/heudiconv/heuristic_reproin.py -b \\\n          --files /data/datasets/hcph-pilot-sourcedata/\\\n                  sub-01/\\\n                  ses-18950702/\n</code></pre> <p>Session number MUST be updated manually</p> Example of the dataset organization <p>Piloting sessions 15 and 16 look like this:</p> <pre><code>\u251c\u2500\u2500 ses-pilot015\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 anat\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_acq-original_T1w.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_acq-original_T1w.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_acq-undistorted_T1w.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_acq-undistorted_T1w.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_T2w.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 sub-001_ses-pilot015_T2w.nii.gz\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 dwi\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_acq-highres_dir-LR_dwi.bval\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_acq-highres_dir-LR_dwi.bvec\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_acq-highres_dir-LR_dwi.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 sub-001_ses-pilot015_acq-highres_dir-LR_dwi.nii.gz\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 fmap\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_acq-b0_dir-RL_epi.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_acq-b0_dir-RL_epi.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_acq-bold_dir-RL_part-mag_epi.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_acq-bold_dir-RL_part-mag_epi.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_acq-bold_dir-RL_part-phase_epi.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_acq-bold_dir-RL_part-phase_epi.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_magnitude1.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_magnitude1.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_magnitude2.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_magnitude2.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_phasediff.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 sub-001_ses-pilot015_phasediff.nii.gz\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 func\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-bht_echo-1_part-mag_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-bht_echo-1_part-mag_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-bht_echo-1_part-phase_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-bht_echo-1_part-phase_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-bht_echo-2_part-mag_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-bht_echo-2_part-mag_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-bht_echo-2_part-phase_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-bht_echo-2_part-phase_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-bht_echo-3_part-mag_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-bht_echo-3_part-mag_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-bht_echo-3_part-phase_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-bht_echo-3_part-phase_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-bht_echo-4_part-mag_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-bht_echo-4_part-mag_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-bht_echo-4_part-phase_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-bht_echo-4_part-phase_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-bht_part-mag_events.tsv\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-bht_part-phase_events.tsv\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-qct_echo-1_part-mag_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-qct_echo-1_part-mag_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-qct_echo-1_part-phase_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-qct_echo-1_part-phase_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-qct_echo-2_part-mag_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-qct_echo-2_part-mag_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-qct_echo-2_part-phase_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-qct_echo-2_part-phase_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-qct_echo-3_part-mag_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-qct_echo-3_part-mag_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-qct_echo-3_part-phase_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-qct_echo-3_part-phase_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-qct_echo-4_part-mag_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-qct_echo-4_part-mag_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-qct_echo-4_part-phase_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-qct_echo-4_part-phase_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-qct_part-mag_events.tsv\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-qct_part-phase_events.tsv\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-rest_echo-1_part-mag_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-rest_echo-1_part-mag_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-rest_echo-1_part-phase_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-rest_echo-1_part-phase_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-rest_echo-2_part-mag_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-rest_echo-2_part-mag_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-rest_echo-2_part-phase_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-rest_echo-2_part-phase_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-rest_echo-3_part-mag_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-rest_echo-3_part-mag_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-rest_echo-3_part-phase_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-rest_echo-3_part-phase_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-rest_echo-4_part-mag_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-rest_echo-4_part-mag_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-rest_echo-4_part-phase_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-rest_echo-4_part-phase_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot015_task-rest_part-mag_events.tsv\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 sub-001_ses-pilot015_task-rest_part-phase_events.tsv\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 sub-001_ses-pilot015_scans.tsv\n\u2514\u2500\u2500 ses-pilot016\n    \u251c\u2500\u2500 anat\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-original_T1w.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-original_T1w.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-undistorted_T1w.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-undistorted_T1w.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_T2w.json\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 sub-001_ses-pilot016_T2w.nii.gz\n    \u251c\u2500\u2500 dwi\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-highres_dir-RL_dwi.bval\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-highres_dir-RL_dwi.bvec\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-highres_dir-RL_dwi.json\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 sub-001_ses-pilot016_acq-highres_dir-RL_dwi.nii.gz\n    \u251c\u2500\u2500 fmap\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-b0_dir-AP_epi.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-b0_dir-AP_epi.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-b0_dir-LR_epi.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-b0_dir-LR_epi.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-b0_dir-PA_epi.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-b0_dir-PA_epi.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-b0_dir-RL_epi.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-b0_dir-RL_epi.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-bold_dir-AP_part-mag_epi.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-bold_dir-AP_part-mag_epi.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-bold_dir-AP_part-phase_epi.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-bold_dir-AP_part-phase_epi.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-bold_dir-LR_part-mag_epi.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-bold_dir-LR_part-mag_epi.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-bold_dir-LR_part-phase_epi.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-bold_dir-LR_part-phase_epi.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-bold_dir-PA_part-mag_epi.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-bold_dir-PA_part-mag_epi.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-bold_dir-PA_part-phase_epi.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-bold_dir-PA_part-phase_epi.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-bold_dir-RL_part-mag_epi.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-bold_dir-RL_part-mag_epi.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-bold_dir-RL_part-phase_epi.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_acq-bold_dir-RL_part-phase_epi.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_magnitude1.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_magnitude1.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_magnitude2.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_magnitude2.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_phasediff.json\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 sub-001_ses-pilot016_phasediff.nii.gz\n    \u251c\u2500\u2500 func\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-bht_echo-1_part-mag_bold.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-bht_echo-1_part-mag_bold.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-bht_echo-1_part-phase_bold.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-bht_echo-1_part-phase_bold.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-bht_echo-2_part-mag_bold.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-bht_echo-2_part-mag_bold.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-bht_echo-2_part-phase_bold.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-bht_echo-2_part-phase_bold.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-bht_echo-3_part-mag_bold.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-bht_echo-3_part-mag_bold.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-bht_echo-3_part-phase_bold.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-bht_echo-3_part-phase_bold.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-bht_echo-4_part-mag_bold.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-bht_echo-4_part-mag_bold.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-bht_echo-4_part-phase_bold.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-bht_echo-4_part-phase_bold.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-bht_part-mag_events.tsv\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-bht_part-phase_events.tsv\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-qct_echo-1_part-mag_bold.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-qct_echo-1_part-mag_bold.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-qct_echo-1_part-phase_bold.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-qct_echo-1_part-phase_bold.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-qct_echo-2_part-mag_bold.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-qct_echo-2_part-mag_bold.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-qct_echo-2_part-phase_bold.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-qct_echo-2_part-phase_bold.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-qct_echo-3_part-mag_bold.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-qct_echo-3_part-mag_bold.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-qct_echo-3_part-phase_bold.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-qct_echo-3_part-phase_bold.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-qct_echo-4_part-mag_bold.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-qct_echo-4_part-mag_bold.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-qct_echo-4_part-phase_bold.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-qct_echo-4_part-phase_bold.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-qct_part-mag_events.tsv\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-qct_part-phase_events.tsv\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-rest_echo-1_part-mag_bold.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-rest_echo-1_part-mag_bold.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-rest_echo-1_part-phase_bold.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-rest_echo-1_part-phase_bold.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-rest_echo-2_part-mag_bold.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-rest_echo-2_part-mag_bold.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-rest_echo-2_part-phase_bold.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-rest_echo-2_part-phase_bold.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-rest_echo-3_part-mag_bold.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-rest_echo-3_part-mag_bold.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-rest_echo-3_part-phase_bold.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-rest_echo-3_part-phase_bold.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-rest_echo-4_part-mag_bold.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-rest_echo-4_part-mag_bold.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-rest_echo-4_part-phase_bold.json\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-rest_echo-4_part-phase_bold.nii.gz\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot016_task-rest_part-mag_events.tsv\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 sub-001_ses-pilot016_task-rest_part-phase_events.tsv\n    \u2514\u2500\u2500 sub-001_ses-pilot016_scans.tsv\n</code></pre> We started to generate phase and magnitude only after session 15 <p>As a result, the piloting data up to session 14 will look more like:</p> <pre><code>\u251c\u2500\u2500 ses-pilot014\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 anat\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_acq-original_T1w.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_acq-original_T1w.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_acq-undistorted_T1w.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_acq-undistorted_T1w.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_T2w.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 sub-001_ses-pilot014_T2w.nii.gz\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 dwi\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_acq-highres_dir-PA_dwi.bval\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_acq-highres_dir-PA_dwi.bvec\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_acq-highres_dir-PA_dwi.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 sub-001_ses-pilot014_acq-highres_dir-PA_dwi.nii.gz\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 fmap\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_acq-b0_dir-AP_epi.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_acq-b0_dir-AP_epi.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_acq-bold_dir-PA_run-1_epi.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_acq-bold_dir-PA_run-1_epi.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_acq-bold_dir-PA_run-2_epi.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_acq-bold_dir-PA_run-2_epi.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_magnitude1.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_magnitude1.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_magnitude2.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_magnitude2.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_phasediff.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 sub-001_ses-pilot014_phasediff.nii.gz\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 func\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-bht_echo-1_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-bht_echo-1_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-bht_echo-2_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-bht_echo-2_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-bht_echo-3_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-bht_echo-3_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-bht_echo-4_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-bht_echo-4_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-bht_events.tsv\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-bht_run-1_echo-1_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-bht_run-1_echo-1_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-bht_run-1_echo-2_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-bht_run-1_echo-2_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-bht_run-1_echo-3_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-bht_run-1_echo-3_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-bht_run-1_echo-4_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-bht_run-1_echo-4_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-bht_run-1_events.tsv\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-bht_run-2_echo-1_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-bht_run-2_echo-1_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-bht_run-2_echo-2_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-bht_run-2_echo-2_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-bht_run-2_echo-3_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-bht_run-2_echo-3_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-bht_run-2_echo-4_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-bht_run-2_echo-4_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-bht_run-2_events.tsv\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-qct_echo-1_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-qct_echo-1_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-qct_echo-2_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-qct_echo-2_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-qct_echo-3_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-qct_echo-3_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-qct_echo-4_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-qct_echo-4_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-qct_events.tsv\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-rest_echo-1_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-rest_echo-1_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-rest_echo-2_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-rest_echo-2_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-rest_echo-3_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-rest_echo-3_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-rest_echo-4_bold.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 sub-001_ses-pilot014_task-rest_echo-4_bold.nii.gz\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 sub-001_ses-pilot014_task-rest_events.tsv\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 sub-001_ses-pilot014_scans.tsv\n</code></pre> </li> </ul>"},{"location":"data-management/post-session/#convert-physiological-recordings-and-eye-tracking-data-to-bids","title":"Convert physiological recordings and eye-tracking data to BIDS","text":"<ul> <li> Plot an overview of the data with the following command.      This command generates a PNG plot of the data within the current directory without processing the data itself.      The physiological data folder is specified via the <code>-in</code> command line argument.     <pre><code>phys2bids -in /data/datasets/hcph-pilot-sourcedata/physio/session-recording.acq -info\n</code></pre></li> <li> Check that all the channels are present in the PNG plot.</li> <li> <p> If this is the case, proceed to process the file using the subsequent command.     Use the <code>-ntp</code> argument to specify the number of volumes for each task, and the <code>-tr</code> argument to indicate the task's repetition time.     Define the output directory with <code>-outdir</code> and provide the path to the heuristic file using <code>-heur</code>.     Adjust the subject and session numbers accordingly.     Should scanner trigger transmission encounter issues and manual adjustments are made to the trigger data, it is possible to allocate one trigger per task.     Set the repetition time duration as the task length, as demonstrated in the example below.     <pre><code>phys2bids -in modified-last-session_multiscan.txt -chtrig 4 -ntp  1 1 1 -tr 158 1200 331 -thr 2 -outdir outputdir -heur heur_physio.py -sub pilot -ses pilot016\n</code></pre></p> </li> <li> <p> Execute the script <code>write_event_file.py</code> as shown below to generate task event files.     This script creates JSON and TSV files containing event information and generates PNG plots for each task, displaying both physiological data and corresponding events.     These plots are saved in the current directory.     The script must be executed with the following command, where <code>outputdir</code> is the output directory of phys2bids:     <pre><code>python write_event_file.py --path ./outputdir/sub-001/ses-pilot016/func/\n</code></pre></p> </li> </ul> <p>Once the script is executed, the BIDS folder (consisting solely of physiological data in this case) will have the following structure: <pre><code>ses-pilot016\n    \u2514\u2500\u2500 func\n        \u251c\u2500\u2500 sub-001_ses-pilot016_task-bht_events.json\n        \u251c\u2500\u2500 sub-001_ses-pilot016_task-bht_events.tsv\n        \u251c\u2500\u2500 sub-001_ses-pilot016_task-bht_physio.json\n        \u251c\u2500\u2500 sub-001_ses-pilot016_task-bht_physio.tsv.gz\n        \u251c\u2500\u2500 sub-001_ses-pilot016_task-qct_events.json\n        \u251c\u2500\u2500 sub-001_ses-pilot016_task-qct_events.tsv\n        \u251c\u2500\u2500 sub-001_ses-pilot016_task-qct_physio.json\n        \u251c\u2500\u2500 sub-001_ses-pilot016_task-qct_physio.tsv.gz\n        \u251c\u2500\u2500 sub-001_ses-pilot016_task-rest_events.json\n        \u251c\u2500\u2500 sub-001_ses-pilot016_task-rest_events.tsv\n        \u251c\u2500\u2500 sub-001_ses-pilot016_task-rest_physio.json\n        \u2514\u2500\u2500 sub-001_ses-pilot016_task-rest_physio.tsv.gz\n</code></pre></p>"},{"location":"data-management/post-session/#add-new-data-to-the-datalad-dataset","title":"Add new data to the DataLad dataset","text":"<p>As new sessions are collected, the corresponding BIDS structures MUST be saved within the DataLad dataset and pushed to remote storage systems:</p> <ul> <li> Save the files in the dataset history using the command below.     Replace <code>&lt;session_id&gt;</code> below with the number of the session (e.g., <code>pilot017</code>):     <pre><code>datalad save -r -m \"add: session &lt;session_id&gt;\" sub-001/ses-&lt;session_id&gt;\n</code></pre></li> <li> Push the new data to the remote storage (if your git containing DataLad and the Git annex is different from <code>origin</code>, e.g., <code>github</code>, replace the name below):     <pre><code>datalad push --to origin\n</code></pre></li> </ul>"},{"location":"data-management/preliminary/","title":"Before data acquisition (storage preparation)","text":"<p>This project maintains data under version control thanks to DataLad<sup>1</sup>. For instructions on how to setup DataLad on your PC, please refer to the official documentation. When employing high-performance computing (HPC), we provide some specific guidelines below.</p> <p>Please read the DataLad Handbook, especially if you are new to this tool</p>"},{"location":"data-management/preliminary/#creating-a-datalad-dataset","title":"Creating a DataLad dataset","text":"<ul> <li> Designate a host and folder where data will be centralized.     In the context of this study, the primary copy of data will be downloaded into &lt;hostname&gt;, under the path <code>/data/datasets/hcph-pilot-sourcedata</code> for the piloting acquisitions and <code>/data/datasets/hcph-sourcedata</code> for the experimental data collection.</li> <li> <p> Install the <code>bids</code> DataLad procedure provided from this repository to facilitate the correct intake of data and metadata:</p> <pre><code>PYTHON_SITE_PACKAGES=$( python -c 'import sysconfig; print(sysconfig.get_paths()[\"purelib\"])' )\nln -s &lt;path&gt;/code/datalad/cfg_bids.py ${PYTHON_SITE_PACKAGES}/datalad/resources/procedures/\n</code></pre> DataLad's documentation does not recommend this approach <p>For safety, you can prefer to use DataLad's recommendations and place the <code>cfg_bids.py</code> file in some of the suggested paths.</p> </li> <li> <p> Check the new procedure is available as <code>bids</code>:</p> <pre><code>$ datalad run-procedure --discover\ncfg_bids (/home/oesteban/.miniconda/lib/python3.9/site-packages/datalad/resources/procedures/cfg_bids.py) [python_script]\ncfg_yoda (/home/oesteban/.miniconda/lib/python3.9/site-packages/datalad/resources/procedures/cfg_yoda.py) [python_script]\ncfg_metadatatypes (/home/oesteban/.miniconda/lib/python3.9/site-packages/datalad/resources/procedures/cfg_metadatatypes.py) [python_script]\ncfg_text2git (/home/oesteban/.miniconda/lib/python3.9/site-packages/datalad/resources/procedures/cfg_text2git.py) [python_script]\ncfg_noannex (/home/oesteban/.miniconda/lib/python3.9/site-packages/datalad/resources/procedures/cfg_noannex.py) [python_script]\n</code></pre> <p>Learn more about the YODA principles (DataLad Handbook)</p> </li> <li> <p> Create a DataLad dataset for the original dataset:</p> <pre><code>cd /data/datasets/\ndatalad create -c bids hcph\n</code></pre> </li> </ul> <ul> <li> <p> Configure a RIA store, where large files will be pushed (and pulled from when installing the dataset in other computers)     Creating a RIA sibling to store large files<pre><code>cd hcph\ndatalad create-sibling-ria -s ria-storage --alias hcph \\\n        --new-store-ok --storage-sibling=only \\\n        \"ria+ssh://&lt;username&gt;@&lt;hostname&gt;:&lt;path&gt;/dataset/\"\n</code></pre></p> </li> <li> <p> Configure a GitHub sibling, to host the Git history and the annex metadata:     Creating a GitHub sibling to store DataLad's infrastructure and dataset's metadata<pre><code>datalad siblings add --dataset . --name github \\\n        --pushurl git@github.com:&lt;organization&gt;/&lt;repo_name&gt;.git \\\n        --url https://github.com/&lt;organization&gt;/&lt;repo_name&gt;.git \\\n        --publish-depends ria-storage\n</code></pre></p> </li> </ul>"},{"location":"data-management/preliminary/#client-side-operations-when-consuming-the-data","title":"Client side operations (when consuming the data)","text":""},{"location":"data-management/preliminary/#installing-the-datalad-dataset","title":"Installing the DataLad dataset","text":"<p>Wherever you want to process the data, you'll need to <code>datalad install</code> it before you can pull down (<code>datalad get</code>) the data. To access the metadata (e.g., sidecar JSON files of the BIDS structure), you'll need to have access to the git repository that corresponds to the data (https://github.com/&lt;organization&gt;/&lt;repo_name&gt;.git) To fetch the dataset from the RIA store, you will need your SSH key be added to the authorized keys.</p> Getting access to the RIA store <p>These steps must be done just once before you can access the dataset's data:</p> <ul> <li> Create a secure SSH key on the system(s) on which you want to install the dataset.</li> <li> Send the SSH public key you just generated (e.g., <code>~/.ssh/id_ed25519.pub</code>) over email to Oscar at *@****.</li> </ul> <ul> <li> <p> Install and get the dataset normally:</p> Installing the dataset without fetching data from annexInstalling the dataset and fetch all data from annex, with 8 parallel threads <pre><code>datalad install https://github.com/&lt;organization&gt;/&lt;repo_name&gt;.git\n</code></pre> <pre><code>datalad install -g -J 8 https://github.com/&lt;organization&gt;/&lt;repo_name&gt;.git\n</code></pre> </li> </ul>"},{"location":"data-management/preliminary/#synchronizing-your-datalad-dataset","title":"Synchronizing your DataLad dataset","text":"<p>Once the dataset is installed, new sessions will be added as data collection goes on. When a new session is added, your DataLad dataset will remain at the same point in history (meaning, it will become out-of-date).</p> <ul> <li> <p> Pull new changes in the git history.     DataLad will first fetch Git remotes and merge for you.</p> <pre><code>cd hcph-dataset/  # &lt;--- cd into the dataset's path\ndatalad update -r --how merge .\n</code></pre> </li> <li> <p> If you need the data, now you can get the data as usual:</p> <pre><code>find sub-001/ses-pilot019 -name \"*.nii.gz\" | xargs datalad get -J 8\n</code></pre> </li> </ul>"},{"location":"data-management/preliminary/#adding-data-or-metadata","title":"Adding data or metadata","text":"<ul> <li> <p> Use <code>datalad save</code> indicating the paths you want to add, and include <code>--to-git</code> if the file contains only metadata (e.g., JSON files).</p> Adding data files (e.g., NIfTI and compressed TSV files)Adding metadata files <pre><code>find sub-001/ses-pilot019 -name \"*.nii\" -or -name \"*.nii.gz\" -or -name \"*.tsv.gz\" | \\\n    xargs datalad save -m '\"add(pilot019): new session data (NIfTI and compressed TSV)\"'\n</code></pre> <pre><code>find sub-001/ses-pilot019 -name \"*.json\" -or -name \"*.tsv\" -or -name \"*.bvec\" -or -name \"*.bval\" | \\\n    xargs datalad save -m '\"add(pilot019): new session metadata (JSON, TSV, bvec/bval)\"'\n</code></pre> </li> </ul>"},{"location":"data-management/preliminary/#hpc-users-instructions-to-install-datalad","title":"HPC users - instructions to install DataLad","text":"<p>When HPC is planned for processing, DataLad will be required on that system(s).</p> <ul> <li> <p> Start an interactive session on the HPC cluster</p> Do not run the installation of Conda and DataLad in the login node <p>HPC systems typically recommend using their login nodes only for tasks related to job submission, data management, and preparing jobscripts. Therefore, the execution of resource-intensive tasks such as fMRIPrep or building containers on login nodes can negatively impact the overall performance and responsiveness of the system for all users. Interactive sessions are a great alternative when available and should be used when creating the DataLad dataset. For example, in the case of systems operating SLURM, the following command would open a new interactive session: <pre><code>srun --nodes=1 --ntasks-per-node=1 --time=01:00:00 --pty bash -i\n</code></pre></p> </li> <li> <p> Install DataLad.     Generally, the most convenient and user-sandboxed installation (i.e., without requiring elevated permissions) can be achieved by using Conda, but other alternatives (such as lmod) can be equally valid:</p> Install DataLad with CondaInstall DataLad in HPC with lmod enabled <ul> <li> <p> Get and install Conda if it is not already deployed in the system:</p> <pre><code>wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh\nbash Miniconda3-latest-Linux-x86_64.sh\n</code></pre> </li> <li> <p> Install DataLad:</p> <pre><code>conda install -c conda-forge -y \"datalad&gt;=0.19\" datalad-container\n</code></pre> </li> </ul> <ul> <li> <p> Check the availability and dependencies for a specific Python version (here we check 3.8.2):</p> <pre><code>module spider Python/3.8.2\n</code></pre> </li> <li> <p> Load Python (please note <code>ml</code> below is a shorthand for <code>module load</code>)</p> <pre><code>ml GCCcore/9.3.0 Python/3.8.2\n</code></pre> </li> <li> <p> Update pip:</p> <pre><code>python -m pip --user -U pip\n</code></pre> </li> <li> <p> Install DataLad:</p> <pre><code>python -m pip install --user \"datalad&gt;=0.19\" datalad-container\n</code></pre> </li> </ul> </li> <li> <p> Check datalad is properly installed, for instance:</p> <pre><code>$ datalad --version\ndatalad 0.19.2\n</code></pre> DataLad crashes (Conda installations) <p>DataLad may fail with the following error: <pre><code>ImportError: cannot import name 'getargspec' from 'inspect' (/home/users/cprovins/miniconda3/lib/python3.11/inspect.py)\n</code></pre></p> <p>In such a scenario, create a Conda environment with a lower version of Python, and re-install datalad <pre><code>conda create -n \"datalad\" python=3.10\nconda activate datalad\nconda install -c conda-forge datalad datalad-container\n</code></pre></p> </li> <li> <p> Configure your Git identity settings.</p> <pre><code>cd ~\ngit config --global --add user.name \"Jane Doe\"\ngit config --global --add user.email doe@example.com\n</code></pre> </li> </ul>"},{"location":"recruitment-scheduling-screening/recruitment/","title":"Recruitment and screening","text":"<p>Cohort I</p> <p>Recruitment, screening and informed consent do not apply to Cohort I because the participant is the Principal Investigator himself.</p> <p>Cohort III</p> <p>Recruitment, screening and informed consent do not apply to Cohort III because the sessions have already been acquired.</p>"},{"location":"recruitment-scheduling-screening/recruitment/#recruitment-shortlist","title":"Recruitment shortlist","text":"<ul> <li> Distribute the recruitment flyers at CHUV, as well as on EPFL and UNIL campuses, both physically and electronically (e.g., e-mail lists).</li> <li> Insert any new potential participant who shows interest by calling  ###-###-####, SMS, email, etc. in our recruits spreadsheet. Make sure you get an e-mail contact to send documents.</li> </ul> <p>Recruits shortlist</p> <ul> <li> Remove all flyers and indicate that recruitment is not open anymore once the shortlist quotas have been reached (5 males and 5 females for Cohort II).</li> </ul>"},{"location":"recruitment-scheduling-screening/recruitment/#first-contact","title":"First contact","text":"<p>Important</p> <ul> <li> Write an email to them within the next 24h.</li> <li> Use the email template and make sure you attach the MRI Safety and Screening Questionnaire and the Informed Consent Form.</li> <li> Confirm the reception of the email AND the documents over the phone.</li> </ul>"},{"location":"recruitment-scheduling-screening/recruitment/#phone-call","title":"Phone call","text":"<p>Info</p> <p>The study coordinator (\u2588\u2588\u2588, Assistante doctorante) will call the potential participant after at least three days of having sent the information in the case of cohort II (HRA, art. 16-3).</p> <ul> <li> Use the phone script to drive the conversation and record participant responses to questions.</li> <li> If participant consents to the phone screen, conduct it and mark the results (screener date, if responded \"yes\" to any medical questions, whether or not passed screener) in the appropriate columns of the recruitment spreadsheet.</li> <li> Confirm whether the potential participant understood the MRI Safety &amp; Screening Questionnaire, and discuss with them any questions or potential reasons that may disqualify them to participate.</li> </ul> <p>Carefully screen the subject</p> <ul> <li> In case of any doubts emerging from the MRI safety screening, indicate the potential participant that you will call them back within three days, after contacting the responsible physician.</li> <li> Collect as much information as possible about their case.</li> <li> Contact \u2588\u2588\u2588 with all the information.</li> <li> In case of negative assessment by the medical contact, the volunteer MUST NOT participate in the study.</li> <li> Otherwise, call back the participant as soon as possible to confirm participation.</li> </ul> <ul> <li> Female participants will be informed and must acknowledge that they must take a pregnancy test before the first scanning session.</li> <li> If the candidate participant does not pass the phone screen, then end the interview, informing them that they do not meet our inclusion criteria, and mark the screen fail in the recruitment spreadsheet.</li> <li> Make sure that the participant's questions about the study are all addressed and answered.</li> <li> Request the potential participant to confirm they are willing to continue.<ul> <li> Indicate in the shortlist of recruits that the participant is ready to schedule the first session.</li> <li> Tell the participant that they will be called back to set up the first session.</li> <li> Remind them that they can ask further questions at any time before the MRI scan session.</li> </ul> </li> </ul>"},{"location":"recruitment-scheduling-screening/recruitment/#templates","title":"Templates","text":""},{"location":"recruitment-scheduling-screening/recruitment/#first-contact-email-fr","title":"First contact email (FR)","text":"<p>Remember to attach the MRI Safety and Screening Questionnaire and the ICF.</p> <p>Objet: Invitation \u00e0 participer \u00e0 une \u00e9tude d'acquisition IRM du cerveau : informations et documents joints</p> <p>Cher/Ch\u00e8re [nom],</p> <p>Nous vous remercions vivement pour l'int\u00e9r\u00eat que vous portez \u00e0 notre \u00e9tude de recherche sur l'imagerie IRM du cerveau.</p> <p>Notre \u00e9quipe m\u00e8ne actuellement une \u00e9tude visant \u00e0 mieux comprendre les diff\u00e9rentes sources de variabilit\u00e9 lors d'un examen IRM.</p> <p>Nous recherchons des participants\u00b7tes \u00e2g\u00e9s de 24 \u00e0 55 ans, en bonne sant\u00e9 et sans ant\u00e9c\u00e9dents de maladies neurologiques. Les participants\u00b7tes doivent consentir \u00e0 la publication de leurs donn\u00e9es dans le cadre du projet. Des mesures de confidentialit\u00e9 sont rigoureusement mises en place pour garantir l'anonymat des donn\u00e9es. Elles impliquent notamment la suppression de toute information permettant l'identification des participants, telles que la date de naissance ou le nom.</p> <p>Participer \u00e0 cette \u00e9tude implique une pr\u00e9sence \u00e0 12 s\u00e9ances d'acquisition IRM du cerveau, d'environ 1h30 chacune. Ceci repr\u00e9sente un temps de participation total d'environ 18 heures. Vous recevrez une indemnit\u00e9 financi\u00e8re pour votre participation. Veuillez noter que si des d\u00e9couvertes fortuites concernant votre sant\u00e9 \u00e9taient faites au cours de l'exp\u00e9rience, vous consentez \u00e0 en \u00eatre inform\u00e9\u00b7e.</p> <p>Nous vous invitons \u00e0 prendre connaissance des documents joints afin d'obtenir un aper\u00e7u de l'\u00e9tude. Le premier document d\u00e9taille les implications d'une participation \u00e0 l'\u00e9tude, l'organisation des s\u00e9ances d'acquisition et fourni un r\u00e9sum\u00e9 des objectifs du projet. Le second document concerne les \u00e9ventuelles contre-indications \u00e0 passer un examen IRM. Veuillez le remplir soigneusement et nous le retourner.</p> <p>Si apr\u00e8s lecture des informations ci-dessus vous acceptez de participer, nous souhaiterions convenir d'un entretien t\u00e9l\u00e9phonique avec vous afin de r\u00e9capituler les points importants de votre participation. Cet entretien nous permettra \u00e9galement de v\u00e9rifier votre \u00e9ligibilit\u00e9 \u00e0 participer \u00e0 l'\u00e9tude et de r\u00e9pondre \u00e0 toutes vos \u00e9ventuelles questions. Nous vous prions de nous retourner votre r\u00e9ponse dans un d\u00e9lai de 3 jours ouvrables. Afin que nous puissions planifier l'entretien t\u00e9l\u00e9phonique, veuillez \u00e9galement nous indiquer les plages horaires dans lesquelles nous pourrions vous contacter.</p> <p>Entre-temps, si vous avez des questions, n'h\u00e9sitez pas \u00e0 nous contacter par e-mail ou par t\u00e9l\u00e9phone au  ###-###-####. Nous serons ravis de r\u00e9pondre \u00e0 toutes vos questions.</p> <p>Nous vous remercions encore une fois pour votre int\u00e9r\u00eat.</p> <p>Cordialement,  C\u00e9line PROVINS  Assistante-doctorante</p>"},{"location":"recruitment-scheduling-screening/recruitment/#first-contact-call-fr","title":"First contact call (FR)","text":"<p>First contact call script in French</p> <p>Bonjour ici C\u00e9line Provins,</p> <p>Je vous appelle concernant l'\u00e9tude d'acquisition IRM du cerveau. Le but de cet appel est de vous r\u00e9p\u00e9ter les \u00e9l\u00e9ments importants concernant le projet. Ensuite nous allons v\u00e9rifier ensemble que vous \u00eates d\u2019accord avec toutes les exigences pour participer \u00e0 ce projet et nous allons v\u00e9rifier que vous n\u2019avez pas de contre-indications qui vous emp\u00eachent de passer un examen IRM. De plus, je suis aussi l\u00e0 pour r\u00e9pondre \u00e0 toutes vos questions, donc n'h\u00e9sitez pas \u00e0 m'interrompre si vous ne comprenez pas quelque chose ou si vous avez des doutes.</p> <p>Est-ce que vous avez des questions jusque l\u00e0 ?</p> <p>Je vais maintenant vous pr\u00e9senter les \u00e9l\u00e9ments essentiels de votre participation \u00e0 notre \u00e9tude. La participation \u00e0 ce projet comprend 12 s\u00e9ances d'environ 1h30 qui se d\u00e9rouleront au CHUV. Chaque s\u00e9ance durera environ 1h30. Nous commencerons par remplir un bref questionnaire pour assurer la s\u00e9curit\u00e9 de la proc\u00e9dure, cela prendra environ 15 minutes ensuite, nous vous pr\u00e9parerons, nous vous expliquerons l\u2019examen et nous nous assurerons que vous ne portez rien qui puisse causer des perturbations magn\u00e9tiques. Nous v\u00e9rifierons \u00e9galement avec une liste de contr\u00f4le que toutes les mesures de s\u00e9curit\u00e9 sont prises et que vous n'avez pas d'\u00e9l\u00e9ments m\u00e9talliques sur vous. Ensuite vous passerez environ 1h15 dans le scanner.</p> <p>Dans chaque s\u00e9ance nous allons non seulement acqu\u00e9rir des images IRM mais nous allons aussi enregistrer des signaux physiologiques au moyen de quatres appareils suppl\u00e9mentaires. Ces appareils sont compatibles avec l\u2019IRM et ils n'affectent pas votre sant\u00e9.</p> <p>Le premier appareil est une ceinture respiratoire pour suivre votre respiration. C'est simplement une ceinture autour de votre ventre ou autour de votre thorax qui mesure le d\u00e9placement de votre ventre.</p> <p>Par la suite, nous installerons trois \u00e9lectrodes sur la partie sup\u00e9rieure de votre thorax. Ces \u00e9lectrodes seront fix\u00e9es \u00e0 l'aide d'un gel conducteur sur votre peau, permettant ainsi de mesurer vos pulsations cardiaques.</p> <p>Le troisi\u00e8me appareil est une canule respiratoire pour mesurer la concentration de dioxyde de carbone expir\u00e9. Une canule respiratoire est un tube que certaines personnes \u00e2g\u00e9es utilisent pour inhaler de l'oxyg\u00e8ne. La diff\u00e9rence c\u2019est que nous n\u2019allons pas vous donner du gaz, mais simplement mesurer la quantit\u00e9 de dioxide de cabone que vous expirez.</p> <p>Le 4\u00e8me appareil est un appareil pour mesurer le mouvement de vos pupilles. Cet appareil ne sera pas fix\u00e9 sur vous et n'a aucun effet ni sur votre sant\u00e9 ni sur votre confort. Durant toute la s\u00e9ance d'IRM, vous tiendrez un bouton alarme dans votre main, c'est-\u00e0-dire qu'\u00e0 n'importe quel moment si vous avez un probl\u00e8me vous pouvez appuyer sur ce bouton d'alarme et nous interrompons l\u2019examen imm\u00e9diatement et venons vous chercher \u00e0 l'int\u00e9rieur du scanner pour voir avec vous ce qui ne va pas. Vous pouvez interrompre une session \u00e0 tout moment sans explication.</p> <p>Est-ce que vous avez des questions? Non, alors continuons.</p> <p>Les risques li\u00e9s \u00e0 l'IRM sont les suivants.</p> <p>l\u2019IRM \u00e9met un fort champ magn\u00e9tique, il est donc dangereux de rentrer dans la salle avec des objets \u00e0 susceptibilit\u00e9 magn\u00e9tique. C'est pourquoi plus tard nous allons minutieusement v\u00e9rifier ensemble la liste du questionnaire de s\u00e9curit\u00e9 IRM. Toutefois en l\u2019absence d\u2019objet \u00e0 susceptibilit\u00e9 magn\u00e9tique, l\u2019IRM est compl\u00e8tement sans danger car il n\u2019utilise pas de rayonnement ionisant.  Il n'y a pas de danger m\u00eame si on fait beaucoup de s\u00e9ances.</p> <p>Notez que le tunnel est assez \u00e9troit, ce qui pourrait occasionner une l\u00e9g\u00e8re sensation de claustrophobie.</p> <p>Si vous \u00eates une femme, je dois vous informer qu\u2019avant la premi\u00e8re session vous allez devoir faire un test de grossesse. C'est pour v\u00e9rifier que vous n'\u00eates pas enceinte, car \u00e9thiquement nous n'avons pas le droit de scanner des femmes enceintes car les effets des IRM sur le f\u0153tus n'ont pas encore \u00e9t\u00e9 \u00e9tudi\u00e9s en d\u00e9tail. Avant chaque s\u00e9ance vous devrez \u00e9galement donner des informations sur vos r\u00e8gles comme le dernier jour des r\u00e8gles ainsi que la r\u00e9gularit\u00e9 de votre cycle. Ceci est important car le cycle menstruel a un effet sur le cerveau et pour la fiabilit\u00e9 de notre \u00e9tude nous avons besoin ces informations. N\u00e9anmoins, veuillez noter que vous avez la possibilit\u00e9 de choisir de ne pas inclure les informations concernant vos cycles menstruels lorsque nous rendrons les donn\u00e9es publiques.</p> <p>Les sessions d'IRM seront planifi\u00e9es en tenant compte de la disponibilit\u00e9 des \u00e9quipements, de vos pr\u00e9f\u00e9rences et de votre emploi du temps. La participation maximale s'\u00e9tend sur une p\u00e9riode de 20 semaines cons\u00e9cutives, soit 5 mois. Cependant, dans l'id\u00e9al, les s\u00e9ances seront planifi\u00e9es \u00e0 des intervalles r\u00e9guliers.</p> <p>Est-ce que vous avez des questions jusque-l\u00e0 ?</p> <p>Ok donc maintenant je veux juste v\u00e9rifier avec vous que vous \u00eates d'accord avec toutes les exigences concernant la participation \u00e0 ce projet. Est-ce que vous \u00eates \u00e2g\u00e9 entre 24 et 55 ans ? Avez-vous \u00e9t\u00e9 diagnostiqu\u00e9(e) avec un trouble ou une maladie neurologique ? Consentez-vous \u00e0 \u00eatre inform\u00e9(e) des d\u00e9couvertes fortuites relatives \u00e0 votre sant\u00e9 ? En effet, par souci \u00e9thique, les images de la premi\u00e8re session seront transmises \u00e0 un radiologue qui les examinera attentivement. Si une anomalie venait \u00e0 \u00eatre d\u00e9tect\u00e9e dans votre cerveau, vous seriez alors averti(e). Par la suite, un \u00e9l\u00e9ment d'une grande importance est que vous devez donner votre accord pour la publication de vos donn\u00e9es. Cependant, soyez assur\u00e9(e) que nous prendrons toutes les mesures n\u00e9cessaires pour garantir la confidentialit\u00e9 de vos donn\u00e9es avant toute publication.</p> <p>Par exemple, nous allons enlever toute informations qui permettraient de vous reconnaitre comme votre nom, votre date de naissance ou la date de l\u2019examen afin de prot\u00e9ger votre confidentialit\u00e9. \u00cates-vous d'accord avec ce point? Un autre \u00e9l\u00e9ment important est que la participation \u00e0 cette \u00e9tude implique de nombreuses sessions IRM. Comme je vous ai dit 12 sessions d'environ 1h30. Ainsi, je vous prie de prendre un moment pour r\u00e9fl\u00e9chir si votre engagement envers le projet n'est pas excessif ni susceptible de devenir pesant \u00e0 mesure que le temps avance, et si vous disposez du temps n\u00e9cessaire pour mener le projet \u00e0 bien. Vous devez aussi accepter de nous informer si vous prenez des m\u00e9dicaments, si vous consommez de l\u2019alcool ou de la drogue car ces substances ont un effet important sur le cerveau et nous avons besoin de savoir pour pouvoir quantifier ces effets.</p> <p>Une autre contrainte c'est que vous devez \u00e9viter de boire du caf\u00e9 4h avant les s\u00e9ances car le caf\u00e9 aussi est connu pour avoir des effets notables sur le cerveau.</p> <p>Maintenant que nous avons confirm\u00e9 que vous \u00eates d'accord avec toutes ces exigences, je vous rappelle que votre participation est enti\u00e8rement libre et que vous pouvez vous retirer \u00e0 tout moment sans explication. Cependant, il est primordial pour nous que les participants parviennent \u00e0 accomplir les 12 sessions afin d'assurer l'int\u00e9gralit\u00e9 de nos donn\u00e9es. Dans cette optique, nous pr\u00e9f\u00e9rons que vous vous engagiez r\u00e9solument \u00e0 mener \u00e0 terme les 12 sessions, en envisageant une interruption de votre participation uniquement en cas de circonstances urgentes ou impr\u00e9vues.</p> <p>Chaque s\u00e9ance sera r\u00e9mun\u00e9r\u00e9 45 francs plus les frais de transport.</p> <p>Des questions ?</p> <p>OK maintenant nous pouvons regarder ensemble le questionnaire de contr\u00f4le de s\u00e9curit\u00e9 et v\u00e9rifier que vous avez r\u00e9pondu non \u00e0 toutes les questions.</p> <p>Avez-vous r\u00e9pondu oui \u00e0 une des questions ? Non ok parfait.</p> <p>Je veux juste rev\u00e9rifier avec vous que vous n\u2019avez bien pas d'aide auditive.</p> <p>Vous n'avez pas de goutti\u00e8re dentaire, de proth\u00e8se dentaire, de fausses dents etc. Vous n'avez pas non plus de piercing de tatouage ou de maquillage permanent ni d\u2019implant capillaire Vous n'avez jamais \u00e9t\u00e9 bless\u00e9 par un objet m\u00e9tallique. Vous n'avez pas subi des op\u00e9rations dans lesquelles il y aurait des m\u00e9taux qui restent dans votre corps comme des clips chirurgicaux, des agrafes, des fixations vert\u00e9brale, un stimulateur de la moelle \u00e9pini\u00e8re, des extendeurs de tissu Vous ne portez pas de valve cardiaque. Vous portez pas de biostimulateur, de pompe \u00e0 m\u00e9dicament interne ou externe, de cath\u00e9ters ou d'articulation artificielle.</p> <p>C\u2019est parfait, vous \u00eates \u00e9ligible \u00e0 participer.</p> <p>Encore quelques instructions \u00e0 suivre avant chaque la s\u00e9ance. Il faut retirer tous les bijoux, piercing compris, et tous les accessoires de cheveux. Veuillez aussi retirer vos proth\u00e8ses dentaires, les fausses dents etc. Il faut \u00e9galement retirer les aides auditives et les lunettes. Si vous \u00eates un homme, veuillez s'il vous pla\u00eet vous raser la partie sup\u00e9rieure du torse car nous avons besoin de placer les \u00e9lectrodes \u00e0 m\u00eame la peau pour bien enregistrer le signal.</p> <p>Voil\u00e0 c\u2019est toutes les informations que j\u2019ai \u00e0 vous partager. Est-ce que vous avez des questions?</p> <p>En tout cas merci beaucoup pour votre participation! Si vous avez des questions, des doutes, n'h\u00e9sitez pas \u00e0 me rappeler \u00e0 ce num\u00e9ro et je vous rappelle dans quelques jours afin de fixer la premi\u00e8re session.</p> <p>Bonne journ\u00e9e.</p> <p>Au revoir.</p>"},{"location":"recruitment-scheduling-screening/scheduling/","title":"Scheduling","text":"<ul> <li> <p> Iteratively draw participants from the recruitment shortlist and call them back to set their first session.</p> <p>Stop calling potential participants when the sample size has been achieved</p> <p>Once the sample size is filled (e.g., 3M/3F for Cohort II), call the remainder of the participants in the shortlist to let them know that they have been moved into the wait list.</p> </li> <li> <p> The first session will always happen at MRI 1 (Prisma<sup>Fit</sup>, \u2588\u2588\u2588)</p> </li> </ul>"},{"location":"recruitment-scheduling-screening/scheduling/#scheduling-of-the-prismafit-system","title":"Scheduling of the Prisma<sup>Fit</sup> system (\u2588\u2588\u2588)","text":"<p>Contact \u2588\u2588\u2588, MRI Operational Manager, for any doubts/problems regarding this system</p> <ul> <li> Open the \u2588\u2588\u2588 scheduling system (URL) on a browser.</li> <li> With the participant on the phone, find a suitable, empty slot by scrolling the calendar.</li> <li> Click on the preferred slot, make sure that selected resource is \u2588\u2588\u2588</li> <li> Select \u2588\u2588\u2588 in the Operator dropdown menu.</li> <li> Select the adequate length for the session (120 minutes)</li> <li> Select Research on healthy subjects in the Type of Scan box.</li> <li> Select true in Technician Required if you are not a certified operator of the system.</li> </ul>"},{"location":"recruitment-scheduling-screening/scheduling/#scheduling-of-the-vidafit-system","title":"Scheduling of the Vida<sup>Fit</sup> system (\u2588\u2588\u2588)","text":"<p>Contact \u2588\u2588\u2588, Technical MRI Coordinator, for any doubts/problems regarding this system</p> <ul> <li> Open the \u2588\u2588\u2588 scheduling system (URL) on a browser.</li> <li> <p> With the participant on the phone, find a suitable, empty slot by scrolling the calendar.</p> <p>Clinical scanner hours are very restricted</p> <p>The study can only be executed on Fridays after 18h00</p> </li> <li> <p> Click on the preferred slot, make sure that selected resource is \u2588\u2588\u2588</p> </li> <li> Select \u2588\u2588\u2588 in the Operator dropdown menu.</li> <li> Select the adequate length for the session (60 minutes)</li> <li> Select Research on healthy subjects in the Type of Scan box.</li> <li> Select true in Technician Required.</li> </ul>"},{"location":"recruitment-scheduling-screening/scheduling/#scheduling-of-the-vida-system","title":"Scheduling of the Vida system (\u2588\u2588\u2588)","text":"<p>Only \u2588\u2588\u2588, Technical MRI Coordinator, can book this system.</p>"}]}